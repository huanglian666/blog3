import{_ as n,o as s,c as a,f as t}from"./app.3adea723.js";const e="/blog3/assets/Filter0.71c6b09a.png",p="/blog3/assets/Filter.a12a5d00.png",o={},l=t('<h2 id="\u4E00\u3001\u4EC0\u4E48\u662Ffilter" tabindex="-1"><a class="header-anchor" href="#\u4E00\u3001\u4EC0\u4E48\u662Ffilter" aria-hidden="true">#</a> \u4E00\u3001\u4EC0\u4E48\u662FFilter</h2><blockquote><p>JavaWeb\u4E09\u5927\u7EC4\u4EF6\uFF08Servlet\uFF0CFilter\uFF0CListener\uFF09\u4E4B\u4E00\uFF1B</p><p>\u4E0EServlet\u7C7B\u4F3C\uFF0C\u7528\u6765\u62E6\u622A\u8BF7\u6C42\uFF0C\u4E0D\u662F\u7528\u6765\u5904\u7406\u8BF7\u6C42\u7684\uFF1B</p><p>\u8FC7\u6EE4\u5668\u5C31\u662F\u4E00\u4E2AJava\u7C7B\uFF0C\u5B9E\u73B0Filter\u63A5\u53E3\u3002</p></blockquote><p><img src="'+e+`" alt=""></p><blockquote><p>\u6267\u884C\u5730\u4F4D\u5728Servlet\u4E4B\u524D\uFF0C\u5BA2\u6237\u7AEF\u53D1\u9001\u8BF7\u6C42\u65F6\uFF0C\u4F1A\u5148\u7ECF\u8FC7Filter\uFF0C\u518D\u5230\u8FBE\u76EE\u6807Servlet\u4E2D\uFF1B\u54CD\u5E94\u65F6\uFF0C\u4F1A\u6839\u636E\u6267\u884C\u6D41\u7A0B\u518D\u6B21\u53CD\u5411\u6267\u884CFilter\u3002\u53EF\u4EE5\u89E3\u51B3\u591A\u4E2AServlet\u5171\u6027\u4EE3\u7801\u7684\u5197\u4F59\u95EE\u9898\uFF08\u4F8B\u5982\uFF1A\u4E71\u7801\u5904\u7406\u3001\u767B\u5F55\u9A8C\u8BC1\uFF09</p></blockquote><h2 id="\u4E8C\u3001filter\u5165\u95E8" tabindex="-1"><a class="header-anchor" href="#\u4E8C\u3001filter\u5165\u95E8" aria-hidden="true">#</a> \u4E8C\u3001Filter\u5165\u95E8</h2><h3 id="_2-1\u3001\u7F16\u5199filter" tabindex="-1"><a class="header-anchor" href="#_2-1\u3001\u7F16\u5199filter" aria-hidden="true">#</a> 2.1\u3001\u7F16\u5199Filter</h3><blockquote><p>Servlet API\u4E2D\u63D0\u4F9B\u4E86\u4E00\u4E2AFilter\u63A5\u53E3\uFF0C\u5F00\u53D1\u4EBA\u5458\u7F16\u5199\u4E00\u4E2AJava\u7C7B\u5B9E\u73B0\u4E86\u8FD9\u4E2A\u63A5\u53E3\u5373\u53EF\uFF0C\u8FD9\u4E2AJava\u7C7B\u79F0\u4E4B\u4E3A\u8FC7\u6EE4\u5668\u3002</p></blockquote><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestFilter</span> <span class="token keyword">implements</span> <span class="token class-name">Filter</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token class-name">FilterConfig</span> config<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doFilter</span><span class="token punctuation">(</span><span class="token class-name">ServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">ServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">FilterChain</span> chain<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;filter....&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        chain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>\u7F16\u5199Servlet\u7528\u6765\u9A8C\u8BC1Filter</p></blockquote><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;TestServlet&quot;</span><span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token string">&quot;/TestServlet&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;servlet...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token function">doGet</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-2\u3001\u914D\u7F6Efilter" tabindex="-1"><a class="header-anchor" href="#_2-2\u3001\u914D\u7F6Efilter" aria-hidden="true">#</a> 2.2\u3001\u914D\u7F6EFilter</h3><blockquote><p>\u5728web.xml\u4E2D\u914D\u7F6EFilter\uFF0C\u7C7B\u4F3C\u5728web.xml\u4E2D\u914D\u7F6EServlet</p></blockquote><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>web-app</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://xmlns.jcp.org/xml/ns/javaee<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name">version</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>3.1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- filter\u7684\u540D\u5B57\uFF0C\u5FC5\u987B\u548C\u53E6\u4E00\u7EC4\u6807\u7B7E\u4E2D\u7684filter\u7684\u540D\u5B57\u4E00\u81F4 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-name</span><span class="token punctuation">&gt;</span></span>TestFilter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-name</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- filter\u7684\u5168\u7C7B\u540D --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-class</span><span class="token punctuation">&gt;</span></span>com.qfedu.filter.TestFilter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-class</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-mapping</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- filter\u7684\u540D\u5B57\uFF0C\u5FC5\u987B\u548C\u53E6\u4E00\u7EC4\u6807\u7B7E\u4E2D\u7684filter\u7684\u540D\u5B57\u4E00\u81F4 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-name</span><span class="token punctuation">&gt;</span></span>TestFilter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-name</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- \u88ABfilter\u62E6\u622A\u7684\u8D44\u6E90 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">&gt;</span></span>/TestServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-mapping</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>web-app</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>\u542F\u52A8\u9879\u76EE\uFF0C\u8BBF\u95EETestServlet\uFF0C\u53D1\u73B0\u5148\u8FD0\u884CTestFilter\u518D\u8FD0\u884CTestServlet\u3002</p></blockquote><h2 id="\u4E09\u3001filter\u7684\u751F\u547D\u5468\u671F" tabindex="-1"><a class="header-anchor" href="#\u4E09\u3001filter\u7684\u751F\u547D\u5468\u671F" aria-hidden="true">#</a> \u4E09\u3001Filter\u7684\u751F\u547D\u5468\u671F</h2><blockquote><p><code>init</code>\uFF1A<strong>\u5728\u670D\u52A1\u5668\u542F\u52A8\u65F6</strong>\u4F1A\u521B\u5EFAFilter\u5B9E\u4F8B\uFF0C\u5E76\u4E14\u6BCF\u4E2A\u7C7B\u578B\u7684Filter\u53EA\u521B\u5EFA\u4E00\u4E2A\u5B9E\u4F8B\uFF0C\u4ECE\u6B64\u4E0D\u518D\u521B\u5EFA\uFF0C\u5728\u521B\u5EFA\u5B8CFilter\u5B9E\u4F8B\u540E\uFF0C\u4F1A\u9A6C\u4E0A\u8C03\u7528init()\u65B9\u6CD5\u5B8C\u6210\u521D\u59CB\u5316\u5DE5\u4F5C\uFF0C\u8FD9\u4E2A\u65B9\u6CD5\u53EA\u4F1A\u88AB\u6267\u884C\u4E00\u6B21\uFF1B</p><p><code>doFilter</code>\uFF1A\u8FD9\u4E2A\u65B9\u6CD5\u4F1A\u5728\u7528\u6237\u6BCF\u6B21\u8BBF\u95EE\u76EE\u6807\u8D44\u6E90\uFF08web.xml\u6587\u4EF6\u914D\u7F6EFilter\u7684url-pattern\u4E2D\u7684\u8DEF\u5F84\uFF09\u65F6\u6267\u884C\uFF0C\u5982\u679C\u9700\u8981\u201C\u653E\u884C\u201D\uFF0C\u90A3\u4E48\u9700\u8981\u8C03\u7528FilterChain\u7684doFilter(ServletRequest,ServletResponse)\u65B9\u6CD5\uFF0C\u5982\u679C\u4E0D\u8C03\u7528FilterChain\u7684doFilter()\u65B9\u6CD5\uFF0C\u90A3\u4E48\u76EE\u6807\u8D44\u6E90\u5C06\u65E0\u6CD5\u6267\u884C\uFF1B</p><p><code>destroy</code> \uFF1A\u670D\u52A1\u5668\u4F1A\u5728\u521B\u5EFAFilter\u5BF9\u8C61\u4E4B\u540E\uFF0C\u628AFilter\u653E\u5230\u7F13\u5B58\u4E2D\u4E00\u76F4\u4F7F\u7528\uFF0C\u901A\u5E38\u4E0D\u4F1A\u9500\u6BC1\u5B83\u3002\u4E00\u822C\u4F1A\u5728\u670D\u52A1\u5668\u5173\u95ED\u65F6\u9500\u6BC1Filter\u5BF9\u8C61\uFF0C\u5728\u9500\u6BC1Filter\u5BF9\u8C61\u4E4B\u524D\uFF0C\u670D\u52A1\u5668\u4F1A\u8C03\u7528Filter\u5BF9\u8C61\u7684destory()\u65B9\u6CD5\u3002</p><p>\u4FEE\u6539TestFilter\u7684\u4EE3\u7801\uFF0C\u8FDB\u884C\u6D4B\u8BD5</p></blockquote><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestFilter</span> <span class="token keyword">implements</span> <span class="token class-name">Filter</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token class-name">FilterConfig</span> config<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;init...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;destroy...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doFilter</span><span class="token punctuation">(</span><span class="token class-name">ServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">ServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">FilterChain</span> chain<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;filter....&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        chain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u56DB\u3001filter\u7684\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#\u56DB\u3001filter\u7684\u914D\u7F6E" aria-hidden="true">#</a> \u56DB\u3001Filter\u7684\u914D\u7F6E</h2><blockquote><p>Filter\u7684\u914D\u7F6E\u548CServlet\u7684\u914D\u7F6E\u7C7B\u4F3C\uFF0C\u5206\u4E3Axml\u548C\u6CE8\u89E3\u4E24\u79CD\u914D\u7F6E\u65B9\u5F0F\u3002</p></blockquote><h3 id="_4-1\u3001xml\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#_4-1\u3001xml\u914D\u7F6E" aria-hidden="true">#</a> 4.1\u3001xml\u914D\u7F6E</h3><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>web-app</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://xmlns.jcp.org/xml/ns/javaee<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name">version</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>3.1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- filter\u7684\u540D\u5B57\uFF0C\u5FC5\u987B\u548C\u53E6\u4E00\u7EC4\u6807\u7B7E\u4E2D\u7684filter\u7684\u540D\u5B57\u4E00\u81F4 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-name</span><span class="token punctuation">&gt;</span></span>TestFilter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-name</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- filter\u7684\u5168\u7C7B\u540D --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-class</span><span class="token punctuation">&gt;</span></span>com.qfedu.filter.TestFilter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-class</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-mapping</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- filter\u7684\u540D\u5B57\uFF0C\u5FC5\u987B\u548C\u53E6\u4E00\u7EC4\u6807\u7B7E\u4E2D\u7684filter\u7684\u540D\u5B57\u4E00\u81F4 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-name</span><span class="token punctuation">&gt;</span></span>TestFilter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-name</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- \u88ABfilter\u62E6\u622A\u7684\u8D44\u6E90 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">&gt;</span></span>/TestServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-mapping</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>web-app</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-2\u3001\u6CE8\u89E3\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#_4-2\u3001\u6CE8\u89E3\u914D\u7F6E" aria-hidden="true">#</a> 4.2\u3001\u6CE8\u89E3\u914D\u7F6E</h3><blockquote><p>\u5728\u81EA\u5B9A\u4E49\u7684Filter\u7C7B\u4E0A\u4F7F\u7528\u6CE8\u89E3<code>@WebFilter</code>\uFF0C\u6CE8\u89E3\u5E38\u7528\u5C5E\u6027\uFF1A</p><ul><li>filterName\uFF1Afilter\u7684\u540D\u5B57\uFF1B</li><li>value\uFF1A\u8FC7\u6EE4\u7684\u76EE\u6807\u8D44\u6E90\u7684\u5730\u5740\u3002</li></ul><p>\u5982\u679C<code>@WebFilter</code>\u53EA\u5199\u4E86\u5B57\u7B26\u4E32\uFF0C\u8FD9\u4E2A\u5B57\u7B26\u4E32Filter\u8FC7\u6EE4\u76EE\u6807\u8D44\u6E90\u7684\u5730\u5740\u3002</p></blockquote><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@WebFilter</span><span class="token punctuation">(</span>filterName <span class="token operator">=</span> <span class="token string">&quot;AFilter&quot;</span><span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token string">&quot;/AServlet&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AFilter</span> <span class="token keyword">implements</span> <span class="token class-name">Filter</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token class-name">FilterConfig</span> config<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doFilter</span><span class="token punctuation">(</span><span class="token class-name">ServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">ServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">FilterChain</span> chain<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;AFilter...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        chain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>\u5BF9\u5E94\u7684Servlet</p></blockquote><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;AServlet&quot;</span><span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token string">&quot;/AServlet&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;AServlet...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token function">doGet</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-3\u3001\u8FC7\u6EE4\u5668\u8DEF\u5F84" tabindex="-1"><a class="header-anchor" href="#_4-3\u3001\u8FC7\u6EE4\u5668\u8DEF\u5F84" aria-hidden="true">#</a> 4.3\u3001\u8FC7\u6EE4\u5668\u8DEF\u5F84</h3><blockquote><p>\u8FC7\u6EE4\u5668\u7684\u8FC7\u6EE4\u8DEF\u5F84\u901A\u5E38\u6709\u4E09\u79CD\u5F62\u5F0F:</p><ul><li>\u7CBE\u786E\u8FC7\u6EE4\u5339\u914D \uFF0C\u6BD4\u5982<code>/index.jsp</code>\u3001<code>/myservlet1</code>\uFF1B</li><li>\u540E\u7F00\u8FC7\u6EE4\u5339\u914D\uFF0C\u6BD4\u5982<code>*.jsp</code>\u3001<code>*.html</code>\u3001<code>*.jpg</code>\uFF1B</li><li>\u901A\u914D\u7B26\u8FC7\u6EE4\u5339\u914D<code>/*</code>\uFF0C\u8868\u793A\u62E6\u622A\u6240\u6709\u3002\u6CE8\u610F\u8FC7\u6EE4\u5668\u4E0D\u80FD\u4F7F\u7528<code>/</code>\u5339\u914D\uFF0C<code>/aaa/bbb/*</code>\u5141\u8BB8\u3002</li></ul></blockquote><h3 id="_4-4\u3001\u8FC7\u6EE4\u5668\u94FE\u548C\u4F18\u5148\u7EA7" tabindex="-1"><a class="header-anchor" href="#_4-4\u3001\u8FC7\u6EE4\u5668\u94FE\u548C\u4F18\u5148\u7EA7" aria-hidden="true">#</a> 4.4\u3001\u8FC7\u6EE4\u5668\u94FE\u548C\u4F18\u5148\u7EA7</h3><h4 id="_4-4-1\u3001\u8FC7\u6EE4\u5668\u94FE" tabindex="-1"><a class="header-anchor" href="#_4-4-1\u3001\u8FC7\u6EE4\u5668\u94FE" aria-hidden="true">#</a> 4.4.1\u3001\u8FC7\u6EE4\u5668\u94FE</h4><blockquote><p>\u5BA2\u6237\u7AEF\u5BF9\u670D\u52A1\u5668\u8BF7\u6C42\u4E4B\u540E\uFF0C\u670D\u52A1\u5668\u8C03\u7528Servlet\u4E4B\u524D\u4F1A\u6267\u884C\u4E00\u7EC4\u8FC7\u6EE4\u5668\uFF08\u591A\u4E2A\u8FC7\u6EE4\u5668\uFF09\uFF0C\u90A3\u4E48\u8FD9\u7EC4\u8FC7\u6EE4\u5668\u5C31\u79F0\u4E3A\u4E00\u6761\u8FC7\u6EE4\u5668\u94FE\u3002</p><p>\u6BCF\u4E2A\u8FC7\u6EE4\u5668\u5B9E\u73B0\u67D0\u4E2A\u7279\u5B9A\u7684\u529F\u80FD\uFF0C\u5F53\u7B2C\u4E00\u4E2AFilter\u7684doFilter\u65B9\u6CD5\u88AB\u8C03\u7528\u65F6\uFF0CWeb\u670D\u52A1\u5668\u4F1A\u521B\u5EFA\u4E00\u4E2A\u4EE3\u8868Filter\u94FE\u7684FilterChain\u5BF9\u8C61\u4F20\u9012\u7ED9\u8BE5\u65B9\u6CD5\u3002\u5728doFilter\u65B9\u6CD5\u4E2D\uFF0C\u5F00\u53D1\u4EBA\u5458\u5982\u679C\u8C03\u7528\u4E86FilterChain\u5BF9\u8C61\u7684doFilter\u65B9\u6CD5\uFF0C\u5219Web\u670D\u52A1\u5668\u4F1A\u68C0\u67E5FilterChain\u5BF9\u8C61\u4E2D\u662F\u5426\u8FD8\u6709filter\uFF0C\u5982\u679C\u6709\uFF0C\u5219\u8C03\u7528\u7B2C2\u4E2Afilter\uFF0C\u5982\u679C\u6CA1\u6709\uFF0C\u5219\u8C03\u7528\u76EE\u6807\u8D44\u6E90\u3002</p></blockquote><p><img src="`+p+`" alt="Filter"></p><blockquote><p>\u521B\u5EFABServlet</p></blockquote><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;BServlet&quot;</span><span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token string">&quot;/BServlet&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;BServlet...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token function">doPost</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>\u521B\u5EFABFilter1\u548CBFilter2</p></blockquote><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//BFilter1</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BFilter1</span> <span class="token keyword">implements</span> <span class="token class-name">Filter</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token class-name">FilterConfig</span> config<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doFilter</span><span class="token punctuation">(</span><span class="token class-name">ServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">ServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">FilterChain</span> chain<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;BFilter1...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u653E\u884C\uFF0C\u5982\u679C\u6709\u540E\u7EEDFilter\uFF0C\u7EE7\u7EED\u8C03\u7528\u540E\u7EEDFilter\u6267\u884C\u8FC7\u6EE4</span>
        chain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//BFilter2</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BFilter2</span> <span class="token keyword">implements</span> <span class="token class-name">Filter</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token class-name">FilterConfig</span> config<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doFilter</span><span class="token punctuation">(</span><span class="token class-name">ServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">ServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">FilterChain</span> chain<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;BFilter2...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u653E\u884C\uFF0C\u5982\u679C\u6709\u540E\u7EEDFilter\uFF0C\u7EE7\u7EED\u8C03\u7528\u540E\u7EEDFilter\u6267\u884C\u8FC7\u6EE4</span>
        chain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>\u5728web.xml\u4E2D\u5206\u522B\u914D\u7F6E\u4E24\u4E2AFilter</p></blockquote><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--
	\u4F7F\u7528XML\u65B9\u5F0F\u914D\u7F6E\u4E24\u4E2AFilter\uFF0C\u6B64\u5904\u6CE8\u610F\u4E24\u4E2A\u7684\u987A\u5E8F 
--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-name</span><span class="token punctuation">&gt;</span></span>BFilter1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-class</span><span class="token punctuation">&gt;</span></span>com.qfedu.filter.BFilter1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-class</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-mapping</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-name</span><span class="token punctuation">&gt;</span></span>BFilter1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">&gt;</span></span>/BServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-mapping</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-name</span><span class="token punctuation">&gt;</span></span>BFilter2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-class</span><span class="token punctuation">&gt;</span></span>com.qfedu.filter.BFilter2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-class</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-mapping</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-name</span><span class="token punctuation">&gt;</span></span>BFilter2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">&gt;</span></span>/BServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-mapping</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>\u8BBF\u95EEBServlet\u6D4B\u8BD5</p></blockquote><h4 id="_4-4-2\u3001\u8FC7\u6EE4\u5668\u4F18\u5148\u7EA7" tabindex="-1"><a class="header-anchor" href="#_4-4-2\u3001\u8FC7\u6EE4\u5668\u4F18\u5148\u7EA7" aria-hidden="true">#</a> 4.4.2\u3001\u8FC7\u6EE4\u5668\u4F18\u5148\u7EA7</h4><blockquote><p>\u5728\u4E00\u4E2AWeb\u5E94\u7528\u4E2D\uFF0C\u53EF\u4EE5\u5F00\u53D1\u7F16\u5199\u591A\u4E2AFilter\uFF0C\u8FD9\u4E9BFilter\u7EC4\u5408\u8D77\u6765\u79F0\u4E4B\u4E3A\u4E00\u4E2AFilter\u94FE\u3002 \u4F18\u5148\u7EA7\uFF1A</p><ul><li>\u5982\u679C\u4E3A\u6CE8\u89E3\u7684\u8BDD\uFF0C\u662F\u6309\u7167\u7C7B<strong>\u5168\u540D\u79F0\u7684\u5B57\u7B26\u4E32\u987A\u5E8F</strong>\u51B3\u5B9A\u4F5C\u7528\u987A\u5E8F\uFF1B</li><li>\u5982\u679Cweb.xml\uFF0C\u6309\u7167 filter-mapping\u6CE8\u518C\u987A\u5E8F\uFF0C<strong>\u4ECE\u4E0A\u5F80\u4E0B</strong>\uFF1B</li><li>web.xml\u914D\u7F6E\u9AD8\u4E8E\u6CE8\u89E3\u65B9\u5F0F\uFF1B</li><li>\u5982\u679C\u6CE8\u89E3\u548Cweb.xml\u540C\u65F6\u914D\u7F6E\uFF0C\u4F1A\u521B\u5EFA\u591A\u4E2A\u8FC7\u6EE4\u5668\u5BF9\u8C61\uFF0C\u9020\u6210\u8FC7\u6EE4\u591A\u6B21\u3002</li></ul><p>\u5173\u4E8E\u201C\u6CE8\u89E3\u548Cweb.xml\u540C\u65F6\u914D\u7F6E\uFF0C\u4F1A\u521B\u5EFA\u591A\u4E2A\u8FC7\u6EE4\u5668\u5BF9\u8C61\uFF0C\u9020\u6210\u8FC7\u6EE4\u591A\u6B21\u201D\uFF0C\u89C1\u4E0B\u9762\u7684\u4EE3\u7801\uFF08\u6CE8\u610F\u6CE8\u91CA\u4E2D\u7684\u5185\u5BB9\uFF09</p></blockquote><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u4FEE\u6539BFilter2\u4EE3\u7801\uFF0C\u5F00\u53D1\u5176\u6CE8\u89E3\u914D\u7F6E\uFF0C\u6CE8\u610F\uFF1A\u6CE8\u89E3\u7684filterName\u548Cweb.xml\u4E2Dfilter-name\u503C\u8981\u662F\u4E0D\u540C\u7684
 */</span>
<span class="token annotation punctuation">@WebFilter</span><span class="token punctuation">(</span>filterName <span class="token operator">=</span> <span class="token string">&quot;BFilter2x&quot;</span><span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token string">&quot;/BServlet&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BFilter2</span> <span class="token keyword">implements</span> <span class="token class-name">Filter</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token class-name">FilterConfig</span> config<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doFilter</span><span class="token punctuation">(</span><span class="token class-name">ServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">ServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">FilterChain</span> chain<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u8FC7\u6EE4\u65F6,\u6253\u5370BFilter2\u7684hash\u503C</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;BFilter2....&quot;</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        chain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>\u6D4B\u8BD5\uFF0C\u8BBF\u95EEBServlet\uFF0C\u6253\u5370\u5982\u4E0B\uFF0C\u4E24\u6B21\u7684hash\u503C\u4E0D\u540C\uFF0C\u8BF4\u660E\u201C\u6CE8\u89E3\u548Cweb.xml\u540C\u65F6\u914D\u7F6E\uFF0C\u4F1A\u521B\u5EFA\u591A\u4E2A\u8FC7\u6EE4\u5668\u5BF9\u8C61\uFF0C\u9020\u6210\u8FC7\u6EE4\u591A\u6B21\u201D\u3002</p></blockquote><div class="language-l ext-l line-numbers-mode"><pre class="language-l"><code>BFilter1...
BFilter2....768904998
BFilter2....703274564
BServlet...
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-5\u3001filter\u5E94\u7528" tabindex="-1"><a class="header-anchor" href="#_4-5\u3001filter\u5E94\u7528" aria-hidden="true">#</a> 4.5\u3001Filter\u5E94\u7528</h3><h4 id="_4-5-1\u3001\u6743\u9650\u9A8C\u8BC1" tabindex="-1"><a class="header-anchor" href="#_4-5-1\u3001\u6743\u9650\u9A8C\u8BC1" aria-hidden="true">#</a> 4.5.1\u3001\u6743\u9650\u9A8C\u8BC1</h4><blockquote><p>\u4FEE\u6539\u767B\u5F55\u6848\u4F8B\uFF0C\u4F7F\u7528Filter\u8FDB\u884C\u6743\u9650\u9A8C\u8BC1\uFF1A</p><ul><li>\u767B\u5F55\u6210\u529F\uFF0C\u76F4\u63A5\u8FDB\u5165success.jsp\uFF1B</li><li>\u767B\u5F55\u5931\u8D25\uFF0C\u8DF3\u8F6C\u5230login.jsp\uFF0C\u5E76\u663E\u793A\u63D0\u793A\u4FE1\u606F\uFF1B</li><li>\u5F3A\u884C\u8BBF\u95EEsuccess.jsp\uFF0C\u8DF3\u8F6C\u5230login.jsp\uFF0C\u5E76\u663E\u793A\u63D0\u793A\u4FE1\u606F\uFF0C\u63D0\u793A\u672A\u767B\u5F55\uFF1B</li></ul><p>\u7528\u4E8E\u767B\u5F55\u9A8C\u8BC1\u7684Filter\u4EE3\u7801\u5982\u4E0B:</p></blockquote><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u7528\u4E8E\u767B\u5F55\u9A8C\u8BC1\u7684Filter
 */</span>
<span class="token annotation punctuation">@WebFilter</span><span class="token punctuation">(</span>filterName <span class="token operator">=</span> <span class="token string">&quot;LoginFilter&quot;</span><span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;/success.jsp&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LoginFilter</span> <span class="token keyword">implements</span> <span class="token class-name">Filter</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token class-name">FilterConfig</span> config<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doFilter</span><span class="token punctuation">(</span><span class="token class-name">ServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">ServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">FilterChain</span> chain<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token class-name">HttpServletRequest</span> req <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span><span class="token punctuation">)</span>request<span class="token punctuation">;</span>
        <span class="token class-name">HttpServletResponse</span> resp <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">HttpServletResponse</span><span class="token punctuation">)</span>response<span class="token punctuation">;</span>

        <span class="token comment">//\u83B7\u53D6Session</span>
        <span class="token class-name">HttpSession</span> session <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">User</span><span class="token punctuation">)</span> session<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>user <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            request<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;errorMsg&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;\u60A8\u8FD8\u672A\u767B\u5F55,\u8BF7\u5148\u767B\u5F55&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            request<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">&quot;/login.jsp&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        chain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>success.jsp</p></blockquote><div class="language-jsp ext-jsp line-numbers-mode"><pre class="language-jsp"><code>&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;success&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;p&gt;\u6B22\u8FCE\${user.username}&lt;/p&gt;
    &lt;p&gt;&lt;a href=&quot;\${pageContext.request.contextPath}/LogoutServlet&quot;&gt;\u6CE8\u9500&lt;/a&gt;&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4-5-2\u3001\u8FC7\u6EE4\u5668\u89E3\u51B3\u7F16\u7801" tabindex="-1"><a class="header-anchor" href="#_4-5-2\u3001\u8FC7\u6EE4\u5668\u89E3\u51B3\u7F16\u7801" aria-hidden="true">#</a> 4.5.2\u3001\u8FC7\u6EE4\u5668\u89E3\u51B3\u7F16\u7801</h4><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@WebFilter</span><span class="token punctuation">(</span>filterName <span class="token operator">=</span> <span class="token string">&quot;EncodingFilter&quot;</span><span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token string">&quot;/*&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EncodingFilter</span> <span class="token keyword">implements</span> <span class="token class-name">Filter</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token class-name">FilterConfig</span> config<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doFilter</span><span class="token punctuation">(</span><span class="token class-name">ServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">ServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">FilterChain</span> chain<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u7EDF\u4E00\u5904\u7406\u8BF7\u6C42\u548C\u54CD\u5E94\u7684\u4E71\u7801</span>
        request<span class="token punctuation">.</span><span class="token function">setCharacterEncoding</span><span class="token punctuation">(</span><span class="token string">&quot;UTF-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        response<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">&quot;text/html;charset=utf-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        chain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,52),c=[l];function i(u,k){return s(),a("div",null,c)}const d=n(o,[["render",i],["__file","05_Filter.html.vue"]]);export{d as default};
