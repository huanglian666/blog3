<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.51">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" href="/logo.jpg"><title>二：Redis简介 | 黄炼wiki</title><meta name="description" content="欢迎来到黄炼的个人博客">
    <link rel="modulepreload" href="/blog3/assets/app.3adea723.js"><link rel="modulepreload" href="/blog3/assets/01_redis.html.1afbe66a.js"><link rel="modulepreload" href="/blog3/assets/image-20210831173947595.c3e47642.js"><link rel="modulepreload" href="/blog3/assets/01_redis.html.2b76ba1e.js"><link rel="prefetch" href="/blog3/assets/index.html.38902101.js"><link rel="prefetch" href="/blog3/assets/index.html.8189c53a.js"><link rel="prefetch" href="/blog3/assets/01_rocketMQ.html.fed5f4a1.js"><link rel="prefetch" href="/blog3/assets/01_微服务架构演变.html.cbfcc3d0.js"><link rel="prefetch" href="/blog3/assets/02_docker.html.7253d83b.js"><link rel="prefetch" href="/blog3/assets/02_redis.html.66c51a65.js"><link rel="prefetch" href="/blog3/assets/03_布隆过滤器.html.fe797ab4.js"><link rel="prefetch" href="/blog3/assets/01_Nacos.html.e7eafdda.js"><link rel="prefetch" href="/blog3/assets/02_Nacos.html.180b9c62.js"><link rel="prefetch" href="/blog3/assets/03_Sentinel.html.b5f8056c.js"><link rel="prefetch" href="/blog3/assets/04_Sleuth.html.7e0cf09e.js"><link rel="prefetch" href="/blog3/assets/05_Gateway.html.ee80906c.js"><link rel="prefetch" href="/blog3/assets/06_Seata.html.06185ae2.js"><link rel="prefetch" href="/blog3/assets/01_ElasticSearch.html.c0df9664.js"><link rel="prefetch" href="/blog3/assets/01_MyBatis快速入门.html.171a9a89.js"><link rel="prefetch" href="/blog3/assets/02_MyBatis进阶.html.58b9fecd.js"><link rel="prefetch" href="/blog3/assets/03_MybatisPlus.html.8d133df0.js"><link rel="prefetch" href="/blog3/assets/04_tkMapper.html.4e8fd557.js"><link rel="prefetch" href="/blog3/assets/01_项目笔记.html.4f96bf81.js"><link rel="prefetch" href="/blog3/assets/02_单点登录SSO.html.aa607e1a.js"><link rel="prefetch" href="/blog3/assets/03_ElasticSearch在项目中做搜索的应用.html.98c5ddc9.js"><link rel="prefetch" href="/blog3/assets/04_IdWorker.html.8911ee77.js"><link rel="prefetch" href="/blog3/assets/05_微信支付.html.529e8b8e.js"><link rel="prefetch" href="/blog3/assets/06_git在项目中的使用.html.4d17867e.js"><link rel="prefetch" href="/blog3/assets/07_网页静态化技术.html.c1f6e3ee.js"><link rel="prefetch" href="/blog3/assets/08_购物车.html.19f87165.js"><link rel="prefetch" href="/blog3/assets/01_SpringIOC和DI.html.9002e28c.js"><link rel="prefetch" href="/blog3/assets/02_动态代理和SpringAOP.html.51bac187.js"><link rel="prefetch" href="/blog3/assets/03_Spring整合MyBatis_声明式事务.html.dd23534d.js"><link rel="prefetch" href="/blog3/assets/04_Spring注解开发_整合Junit.html.aebf97d0.js"><link rel="prefetch" href="/blog3/assets/01_SpringBoot_入门.html.e25b3fac.js"><link rel="prefetch" href="/blog3/assets/02_SpringBoot_进阶.html.e208edd2.js"><link rel="prefetch" href="/blog3/assets/03_SpringBoot_Swagger2.html.1ce1aa95.js"><link rel="prefetch" href="/blog3/assets/01_ECMAScript6入门.html.b8137d0c.js"><link rel="prefetch" href="/blog3/assets/02_Vue入门.html.685e8ef9.js"><link rel="prefetch" href="/blog3/assets/03_Vue进阶.html.4e604d65.js"><link rel="prefetch" href="/blog3/assets/04_Wiki实战项目.html.3f6cd7b6.js"><link rel="prefetch" href="/blog3/assets/01_SpringMVC快速入门及解析.html.eb18a9a7.js"><link rel="prefetch" href="/blog3/assets/02_SpringMVC的响应和请求.html.8264ed4f.js"><link rel="prefetch" href="/blog3/assets/03_SpringMVC文件上传下载及异常处理.html.45d506e9.js"><link rel="prefetch" href="/blog3/assets/04_SSM整合案例.html.cb9e3d12.js"><link rel="prefetch" href="/blog3/assets/05_SpringSecurity通用权限管理系统.html.b66b23a7.js"><link rel="prefetch" href="/blog3/assets/01_Java入门与开发环境搭建.html.d86fc996.js"><link rel="prefetch" href="/blog3/assets/02_Java语言基础.html.28c628f1.js"><link rel="prefetch" href="/blog3/assets/03_控制流程.html.67b8737c.js"><link rel="prefetch" href="/blog3/assets/04_方法.html.ee0d13f4.js"><link rel="prefetch" href="/blog3/assets/05_数组.html.4bda839f.js"><link rel="prefetch" href="/blog3/assets/06_面向对象基础.html.8abda6b8.js"><link rel="prefetch" href="/blog3/assets/07_面向对象三大特征.html.2be22345.js"><link rel="prefetch" href="/blog3/assets/08_三个修饰符.html.dc1365c8.js"><link rel="prefetch" href="/blog3/assets/09_接口和内部类.html.d7982d89.js"><link rel="prefetch" href="/blog3/assets/10_常用类.html.3e5d6641.js"><link rel="prefetch" href="/blog3/assets/11_集合.html.4f499626.js"><link rel="prefetch" href="/blog3/assets/12_异常.html.d7f3537b.js"><link rel="prefetch" href="/blog3/assets/_sidebar.html.3d994719.js"><link rel="prefetch" href="/blog3/assets/01_JDBC.html.b42ba74a.js"><link rel="prefetch" href="/blog3/assets/02_数据库连接池.html.bba55e71.js"><link rel="prefetch" href="/blog3/assets/03_事务.html.c39bf40e.js"><link rel="prefetch" href="/blog3/assets/04_Commons_DbUtils.html.c8551f03.js"><link rel="prefetch" href="/blog3/assets/_sidebar.html.833ee794.js"><link rel="prefetch" href="/blog3/assets/01_IO.html.90c27550.js"><link rel="prefetch" href="/blog3/assets/02_多线程.html.ecb3c522.js"><link rel="prefetch" href="/blog3/assets/03_网络编程.html.8a67705b.js"><link rel="prefetch" href="/blog3/assets/04_反射.html.8694919d.js"><link rel="prefetch" href="/blog3/assets/05_Java8新特性.html.c816e6dc.js"><link rel="prefetch" href="/blog3/assets/_sidebar.html.4e1bcaa8.js"><link rel="prefetch" href="/blog3/assets/Git.html.925c3dde.js"><link rel="prefetch" href="/blog3/assets/01_MySQL概述.html.077fb83c.js"><link rel="prefetch" href="/blog3/assets/02_MySQL安装及配置.html.04be7393.js"><link rel="prefetch" href="/blog3/assets/03_MySQL客户端工具.html.e037bf0e.js"><link rel="prefetch" href="/blog3/assets/04_SQL概述及DDL.html.e3013f73.js"><link rel="prefetch" href="/blog3/assets/05_DML.html.20ba6699.js"><link rel="prefetch" href="/blog3/assets/06_约束.html.15b8a482.js"><link rel="prefetch" href="/blog3/assets/07_DQL.html.bd05abdc.js"><link rel="prefetch" href="/blog3/assets/08_DCL.html.f22bba58.js"><link rel="prefetch" href="/blog3/assets/09_TPL.html.beadb4ca.js"><link rel="prefetch" href="/blog3/assets/10_视图.html.c95f9f22.js"><link rel="prefetch" href="/blog3/assets/11_常用函数.html.a02bf977.js"><link rel="prefetch" href="/blog3/assets/12_变量_存储过程_函数.html.330c750a.js"><link rel="prefetch" href="/blog3/assets/_sidebar.html.782cbf69.js"><link rel="prefetch" href="/blog3/assets/Nginx.html.dba46750.js"><link rel="prefetch" href="/blog3/assets/01_Maven基础.html.958fd061.js"><link rel="prefetch" href="/blog3/assets/02_Maven聚合工程.html.4b507850.js"><link rel="prefetch" href="/blog3/assets/01_Web开发基础.html.0aa3510f.js"><link rel="prefetch" href="/blog3/assets/02_Servlet.html.8cf70cfb.js"><link rel="prefetch" href="/blog3/assets/03_JSP入门_Cookie_Session.html.ff94de54.js"><link rel="prefetch" href="/blog3/assets/04_JSP进阶_EL_JSTL.html.2759a050.js"><link rel="prefetch" href="/blog3/assets/05_Filter.html.4a2c54a9.js"><link rel="prefetch" href="/blog3/assets/06_文件上传.html.fb59c90c.js"><link rel="prefetch" href="/blog3/assets/_sidebar.html.f1ad173b.js"><link rel="prefetch" href="/blog3/assets/01_IDEA配置_2019.html.c06055b9.js"><link rel="prefetch" href="/blog3/assets/02_IDEA配置_2020.html.883c03e9.js"><link rel="prefetch" href="/blog3/assets/03_IDEA快捷键.html.d3984988.js"><link rel="prefetch" href="/blog3/assets/index.html.e27adb3f.js"><link rel="prefetch" href="/blog3/assets/_sidebar.html.179c8daa.js"><link rel="prefetch" href="/blog3/assets/01_Linux_安装.html.b958d4a7.js"><link rel="prefetch" href="/blog3/assets/02_Linux_简介及常用命令.html.ba5cefca.js"><link rel="prefetch" href="/blog3/assets/03_Linux_Vim使用.html.2c185bc6.js"><link rel="prefetch" href="/blog3/assets/04_Linux_软件安装及Java开发环境搭建.html.ab13704b.js"><link rel="prefetch" href="/blog3/assets/05_Linux_搭建基于SFTP服务的文件服务器.html.9a0c60c2.js"><link rel="prefetch" href="/blog3/assets/06_Linux_防火墙FirewallD设置.html.ebcd6327.js"><link rel="prefetch" href="/blog3/assets/01_HTML.html.fd2fcd78.js"><link rel="prefetch" href="/blog3/assets/02_CSS.html.ce4d719a.js"><link rel="prefetch" href="/blog3/assets/03_JavaScript.html.377314ff.js"><link rel="prefetch" href="/blog3/assets/04_jQuery.html.ae376961.js"><link rel="prefetch" href="/blog3/assets/05_BootStrap.html.660cc871.js"><link rel="prefetch" href="/blog3/assets/06_Ajax_JSON.html.5532c8bb.js"><link rel="prefetch" href="/blog3/assets/_sidebar.html.19b50be0.js"><link rel="prefetch" href="/blog3/assets/404.html.d2dc3323.js"><link rel="prefetch" href="/blog3/assets/index.html.fb1bd2ae.js"><link rel="prefetch" href="/blog3/assets/index.html.17cfeca6.js"><link rel="prefetch" href="/blog3/assets/01_rocketMQ.html.43f9a1fd.js"><link rel="prefetch" href="/blog3/assets/01_微服务架构演变.html.deb54693.js"><link rel="prefetch" href="/blog3/assets/02_docker.html.4a815ecb.js"><link rel="prefetch" href="/blog3/assets/02_redis.html.729203e3.js"><link rel="prefetch" href="/blog3/assets/03_布隆过滤器.html.30926a69.js"><link rel="prefetch" href="/blog3/assets/01_Nacos.html.aebfed7e.js"><link rel="prefetch" href="/blog3/assets/02_Nacos.html.2a08818a.js"><link rel="prefetch" href="/blog3/assets/03_Sentinel.html.489fae99.js"><link rel="prefetch" href="/blog3/assets/04_Sleuth.html.c49a9d68.js"><link rel="prefetch" href="/blog3/assets/05_Gateway.html.1a98981b.js"><link rel="prefetch" href="/blog3/assets/06_Seata.html.42f043e4.js"><link rel="prefetch" href="/blog3/assets/01_ElasticSearch.html.2ea0bf1e.js"><link rel="prefetch" href="/blog3/assets/01_MyBatis快速入门.html.f27cc6bc.js"><link rel="prefetch" href="/blog3/assets/02_MyBatis进阶.html.bc00421b.js"><link rel="prefetch" href="/blog3/assets/03_MybatisPlus.html.9c7fe371.js"><link rel="prefetch" href="/blog3/assets/04_tkMapper.html.ab3cee92.js"><link rel="prefetch" href="/blog3/assets/01_项目笔记.html.33e97736.js"><link rel="prefetch" href="/blog3/assets/02_单点登录SSO.html.570d1fd9.js"><link rel="prefetch" href="/blog3/assets/03_ElasticSearch在项目中做搜索的应用.html.9384233e.js"><link rel="prefetch" href="/blog3/assets/04_IdWorker.html.f4443b6c.js"><link rel="prefetch" href="/blog3/assets/05_微信支付.html.ee6ecb3a.js"><link rel="prefetch" href="/blog3/assets/06_git在项目中的使用.html.9e2f7008.js"><link rel="prefetch" href="/blog3/assets/07_网页静态化技术.html.d4651bd4.js"><link rel="prefetch" href="/blog3/assets/08_购物车.html.bc4c5d19.js"><link rel="prefetch" href="/blog3/assets/01_SpringIOC和DI.html.e9025c4a.js"><link rel="prefetch" href="/blog3/assets/02_动态代理和SpringAOP.html.08102ee0.js"><link rel="prefetch" href="/blog3/assets/03_Spring整合MyBatis_声明式事务.html.7065b2e9.js"><link rel="prefetch" href="/blog3/assets/04_Spring注解开发_整合Junit.html.4866e23c.js"><link rel="prefetch" href="/blog3/assets/01_SpringBoot_入门.html.27dc485c.js"><link rel="prefetch" href="/blog3/assets/02_SpringBoot_进阶.html.d92e76b0.js"><link rel="prefetch" href="/blog3/assets/03_SpringBoot_Swagger2.html.06588538.js"><link rel="prefetch" href="/blog3/assets/01_ECMAScript6入门.html.356b07a1.js"><link rel="prefetch" href="/blog3/assets/02_Vue入门.html.43f87a05.js"><link rel="prefetch" href="/blog3/assets/03_Vue进阶.html.aca9689b.js"><link rel="prefetch" href="/blog3/assets/04_Wiki实战项目.html.aa752d04.js"><link rel="prefetch" href="/blog3/assets/01_SpringMVC快速入门及解析.html.8ab8bbc4.js"><link rel="prefetch" href="/blog3/assets/02_SpringMVC的响应和请求.html.71903f2d.js"><link rel="prefetch" href="/blog3/assets/03_SpringMVC文件上传下载及异常处理.html.012766d6.js"><link rel="prefetch" href="/blog3/assets/04_SSM整合案例.html.53d79562.js"><link rel="prefetch" href="/blog3/assets/05_SpringSecurity通用权限管理系统.html.d5dab310.js"><link rel="prefetch" href="/blog3/assets/01_Java入门与开发环境搭建.html.abcfb1ea.js"><link rel="prefetch" href="/blog3/assets/02_Java语言基础.html.189f98b7.js"><link rel="prefetch" href="/blog3/assets/03_控制流程.html.69f2fc74.js"><link rel="prefetch" href="/blog3/assets/04_方法.html.1a01dfd5.js"><link rel="prefetch" href="/blog3/assets/05_数组.html.34ac1dc4.js"><link rel="prefetch" href="/blog3/assets/06_面向对象基础.html.d6d8bd4e.js"><link rel="prefetch" href="/blog3/assets/07_面向对象三大特征.html.33e330a7.js"><link rel="prefetch" href="/blog3/assets/08_三个修饰符.html.39dfbba0.js"><link rel="prefetch" href="/blog3/assets/09_接口和内部类.html.044e4a82.js"><link rel="prefetch" href="/blog3/assets/10_常用类.html.1cdd0bf9.js"><link rel="prefetch" href="/blog3/assets/11_集合.html.66a059d6.js"><link rel="prefetch" href="/blog3/assets/12_异常.html.96bae675.js"><link rel="prefetch" href="/blog3/assets/_sidebar.html.9f7f441f.js"><link rel="prefetch" href="/blog3/assets/01_JDBC.html.d34fa022.js"><link rel="prefetch" href="/blog3/assets/02_数据库连接池.html.6c83f6ce.js"><link rel="prefetch" href="/blog3/assets/03_事务.html.064869ba.js"><link rel="prefetch" href="/blog3/assets/04_Commons_DbUtils.html.d5a8e999.js"><link rel="prefetch" href="/blog3/assets/_sidebar.html.da720365.js"><link rel="prefetch" href="/blog3/assets/01_IO.html.c2630ef1.js"><link rel="prefetch" href="/blog3/assets/02_多线程.html.54abe03f.js"><link rel="prefetch" href="/blog3/assets/03_网络编程.html.34618b2a.js"><link rel="prefetch" href="/blog3/assets/04_反射.html.adfd75d4.js"><link rel="prefetch" href="/blog3/assets/05_Java8新特性.html.5ed82152.js"><link rel="prefetch" href="/blog3/assets/_sidebar.html.dc14845b.js"><link rel="prefetch" href="/blog3/assets/Git.html.f3eef31b.js"><link rel="prefetch" href="/blog3/assets/01_MySQL概述.html.8aec5995.js"><link rel="prefetch" href="/blog3/assets/02_MySQL安装及配置.html.e77e4cdd.js"><link rel="prefetch" href="/blog3/assets/03_MySQL客户端工具.html.07a2e9c4.js"><link rel="prefetch" href="/blog3/assets/04_SQL概述及DDL.html.326fa9b0.js"><link rel="prefetch" href="/blog3/assets/05_DML.html.9cbf4317.js"><link rel="prefetch" href="/blog3/assets/06_约束.html.065f45bd.js"><link rel="prefetch" href="/blog3/assets/07_DQL.html.760935cd.js"><link rel="prefetch" href="/blog3/assets/08_DCL.html.b084795f.js"><link rel="prefetch" href="/blog3/assets/09_TPL.html.3a799ef9.js"><link rel="prefetch" href="/blog3/assets/10_视图.html.12d8b90f.js"><link rel="prefetch" href="/blog3/assets/11_常用函数.html.9f6499fd.js"><link rel="prefetch" href="/blog3/assets/12_变量_存储过程_函数.html.124df3fb.js"><link rel="prefetch" href="/blog3/assets/_sidebar.html.77fcec39.js"><link rel="prefetch" href="/blog3/assets/Nginx.html.8984ab09.js"><link rel="prefetch" href="/blog3/assets/01_Maven基础.html.6bfe7d8f.js"><link rel="prefetch" href="/blog3/assets/02_Maven聚合工程.html.1cf3c959.js"><link rel="prefetch" href="/blog3/assets/01_Web开发基础.html.4da426c5.js"><link rel="prefetch" href="/blog3/assets/02_Servlet.html.7808cdf5.js"><link rel="prefetch" href="/blog3/assets/03_JSP入门_Cookie_Session.html.93a6c905.js"><link rel="prefetch" href="/blog3/assets/04_JSP进阶_EL_JSTL.html.76035256.js"><link rel="prefetch" href="/blog3/assets/05_Filter.html.c1e6aaaa.js"><link rel="prefetch" href="/blog3/assets/06_文件上传.html.59b01e42.js"><link rel="prefetch" href="/blog3/assets/_sidebar.html.6490a630.js"><link rel="prefetch" href="/blog3/assets/01_IDEA配置_2019.html.18a094a0.js"><link rel="prefetch" href="/blog3/assets/02_IDEA配置_2020.html.6cf4fbca.js"><link rel="prefetch" href="/blog3/assets/03_IDEA快捷键.html.17d43a54.js"><link rel="prefetch" href="/blog3/assets/index.html.a3e371be.js"><link rel="prefetch" href="/blog3/assets/_sidebar.html.d854d578.js"><link rel="prefetch" href="/blog3/assets/01_Linux_安装.html.55ea921c.js"><link rel="prefetch" href="/blog3/assets/02_Linux_简介及常用命令.html.98afc996.js"><link rel="prefetch" href="/blog3/assets/03_Linux_Vim使用.html.d00539de.js"><link rel="prefetch" href="/blog3/assets/04_Linux_软件安装及Java开发环境搭建.html.45ccf35e.js"><link rel="prefetch" href="/blog3/assets/05_Linux_搭建基于SFTP服务的文件服务器.html.010ee96b.js"><link rel="prefetch" href="/blog3/assets/06_Linux_防火墙FirewallD设置.html.4f0de24a.js"><link rel="prefetch" href="/blog3/assets/01_HTML.html.5d9da213.js"><link rel="prefetch" href="/blog3/assets/02_CSS.html.82602fec.js"><link rel="prefetch" href="/blog3/assets/03_JavaScript.html.3ab89de3.js"><link rel="prefetch" href="/blog3/assets/04_jQuery.html.d4754862.js"><link rel="prefetch" href="/blog3/assets/05_BootStrap.html.61b002d3.js"><link rel="prefetch" href="/blog3/assets/06_Ajax_JSON.html.26e94590.js"><link rel="prefetch" href="/blog3/assets/_sidebar.html.adf5b19c.js"><link rel="prefetch" href="/blog3/assets/404.html.28878b78.js">
    <link rel="stylesheet" href="/blog3/assets/style.1a47269d.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/blog3/" class=""><!----><span class="site-name">黄炼wiki</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/blog3/" class="" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="JavaSE"><span class="title">JavaSE</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="JavaSE"><span class="title">JavaSE</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>JavaSE基础</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/blog3/javase/basic/01_Java入门与开发环境搭建.md" class="" aria-label="01_Java入门与开发环境搭建"><!--[--><!--]--> 01_Java入门与开发环境搭建 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/javase/basic/04_方法.md" class="" aria-label="02_Java语言基础"><!--[--><!--]--> 02_Java语言基础 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/javase/basic/04_方法.md" class="" aria-label="03_控制流程"><!--[--><!--]--> 03_控制流程 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/javase/basic/04_方法.md" class="" aria-label="04_方法"><!--[--><!--]--> 04_方法 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/javase/basic/05_数组.md" class="" aria-label="05_数组"><!--[--><!--]--> 05_数组 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/javase/basic/06_面向对象基础.md" class="" aria-label="06_面向对象基础"><!--[--><!--]--> 06_面向对象基础 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/javase/basic/07_面向对象三大特征.md" class="" aria-label="07_面向对象三大特征"><!--[--><!--]--> 07_面向对象三大特征 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/javase/basic/08_三个修饰符.md" class="" aria-label="08_三个修饰符"><!--[--><!--]--> 08_三个修饰符 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/javase/basic/09_接口和内部类.md" class="" aria-label="09_接口和内部类"><!--[--><!--]--> 09_接口和内部类 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/javase/basic/10_常用类.md" class="" aria-label="10_常用类"><!--[--><!--]--> 10_常用类 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/javase/basic/11_集合.md" class="" aria-label="11_集合"><!--[--><!--]--> 11_集合 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/javase/basic/12_异常.md" class="" aria-label="12_异常"><!--[--><!--]--> 12_异常 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>JavaSE高级</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/blog3/javase/senior/01_IO.md" class="" aria-label="01_IO"><!--[--><!--]--> 01_IO <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/javase/senior/02_多线程.md" class="" aria-label="02_多线程"><!--[--><!--]--> 02_多线程 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/javase/senior/03_网络编程.md" class="" aria-label="03_网络编程"><!--[--><!--]--> 03_网络编程 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/javase/senior/04_反射.md" class="" aria-label="04_反射"><!--[--><!--]--> 04_反射 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/javase/senior/05_Java8新特性.md" class="" aria-label="05_Java8新特性"><!--[--><!--]--> 05_Java8新特性 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="工具|部署"><span class="title">工具|部署</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="工具|部署"><span class="title">工具|部署</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>IDEA</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/blog3/tool/idea/" class="" aria-label="简介"><!--[--><!--]--> 简介 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/tool/idea/01_IDEA配置_2019.md" class="" aria-label="01_IDEA配置_2019"><!--[--><!--]--> 01_IDEA配置_2019 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/tool/idea/02_IDEA配置_2020.md" class="" aria-label="02_IDEA配置_2020"><!--[--><!--]--> 02_IDEA配置_2020 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/tool/idea/03_IDEA快捷键.md" class="" aria-label="03_IDEA快捷键"><!--[--><!--]--> 03_IDEA快捷键 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Maven</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/blog3/tool/maven/01_Maven基础.md" class="" aria-label="01_Maven基础"><!--[--><!--]--> 01_Maven基础 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/springCloud/redis/02_Maven聚合工程.md" class="" aria-label="02_Maven聚合工程"><!--[--><!--]--> 02_Maven聚合工程 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>版本控制</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/blog3/tool/git/Git.md" class="" aria-label="Git基础教程"><!--[--><!--]--> Git基础教程 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Linux</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/blog3/tool/linux/01_Linux_安装.md" class="" aria-label="01_Linux_安装"><!--[--><!--]--> 01_Linux_安装 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/tool/linux/02_Linux_简介及常用命令.md" class="" aria-label="02_Linux_简介及常用命令"><!--[--><!--]--> 02_Linux_简介及常用命令 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/tool/linux/03_Linux_Vim使用.md" class="" aria-label="03_Linux_Vim使用"><!--[--><!--]--> 03_Linux_Vim使用 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/tool/linux/04_Linux_软件安装及Java开发环境搭建.md" class="" aria-label="04_Linux_软件安装及Java开发环境搭建"><!--[--><!--]--> 04_Linux_软件安装及Java开发环境搭建 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/tool/linux/05_Linux_搭建基于SFTP服务的文件服务器.md" class="" aria-label="05_Linux_搭建基于SFTP服务的文件服务器"><!--[--><!--]--> 05_Linux_搭建基于SFTP服务的文件服务器 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/tool/linux/06_Linux_防火墙FirewallD设置.md" class="" aria-label="06_Linux_防火墙FirewallD设置"><!--[--><!--]--> 06_Linux_防火墙FirewallD设置 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>代理服务器</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/blog3/tool/nginx/Nginx.md" class="" aria-label="Nginx基础教程"><!--[--><!--]--> Nginx基础教程 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="数据库"><span class="title">数据库</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="数据库"><span class="title">数据库</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>MySql</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/blog3/sql/mysql/01_MySQL概述.md" class="" aria-label="01_MySQL概述"><!--[--><!--]--> 01_MySQL概述 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/sql/mysql/02_MySQL安装及配置.md" class="" aria-label="02_MySQL安装及配置"><!--[--><!--]--> 02_MySQL安装及配置 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/sql/mysql/03_MySQL客户端工具.md" class="" aria-label="03_MySQL客户端工具"><!--[--><!--]--> 03_MySQL客户端工具 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/sql/mysql/04_SQL概述及DDL.md" class="" aria-label="04_SQL概述及DDL"><!--[--><!--]--> 04_SQL概述及DDL <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/sql/mysql/05_DML.md" class="" aria-label="05_DML"><!--[--><!--]--> 05_DML <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/sql/mysql/06_约束.md" class="" aria-label="06_约束"><!--[--><!--]--> 06_约束 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/sql/mysql/07_DQL.md" class="" aria-label="07_DQL"><!--[--><!--]--> 07_DQL <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/sql/mysql/08_DCL.md" class="" aria-label="08_DCL"><!--[--><!--]--> 08_DCL <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/sql/mysql/09_TPL.md" class="" aria-label="09_TPL"><!--[--><!--]--> 09_TPL <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/sql/mysql/10_视图.md" class="" aria-label="10_视图"><!--[--><!--]--> 10_视图 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/sql/mysql/11_常用函数.md" class="" aria-label="11_常用函数"><!--[--><!--]--> 11_常用函数 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/sql/mysql/12_变量_存储过程_函数.md" class="" aria-label="12_变量_存储过程_函数"><!--[--><!--]--> 12_变量_存储过程_函数 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>JDBC</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/blog3/sql/jdbc/01_JDBC.md" class="" aria-label="01_JDBC"><!--[--><!--]--> 01_JDBC <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/sql/jdbc/02_数据库连接池.md" class="" aria-label="02_数据库连接池"><!--[--><!--]--> 02_数据库连接池 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/sql/jdbc/03_事务.md" class="" aria-label="03_事务"><!--[--><!--]--> 03_事务 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/sql/jdbc/04_Commons_DbUtils.md" class="" aria-label="04_Commons_DbUtils"><!--[--><!--]--> 04_Commons_DbUtils <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Web开发"><span class="title">Web开发</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Web开发"><span class="title">Web开发</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>前端基础</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/blog3/web/view/01_HTML.md" class="" aria-label="01_HTML"><!--[--><!--]--> 01_HTML <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/web/view/02_CSS.md" class="" aria-label="02_CSS"><!--[--><!--]--> 02_CSS <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/web/view/03_JavaScript.md" class="" aria-label="03_JavaScript"><!--[--><!--]--> 03_JavaScript <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/web/view/04_jQuery.md" class="" aria-label="04_jQuery"><!--[--><!--]--> 04_jQuery <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/web/view/05_BootStrap.md" class="" aria-label="05_BootStrap"><!--[--><!--]--> 05_BootStrap <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/web/view/06_Ajax_JSON.md" class="" aria-label="06_Ajax_JSON"><!--[--><!--]--> 06_Ajax_JSON <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>JavaWeb</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/blog3/web/javaweb/01_Web开发基础.md" class="" aria-label="01_Web开发基础"><!--[--><!--]--> 01_Web开发基础 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/web/javaweb/02_Servlet.md" class="" aria-label="02_Servlet"><!--[--><!--]--> 02_Servlet <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/web/javaweb/03_JSP入门_Cookie_Session.md" class="" aria-label="03_JSP入门_Cookie_Session"><!--[--><!--]--> 03_JSP入门_Cookie_Session <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/web/javaweb/04_JSP进阶_EL_JSTL.md" class="" aria-label="04_JSP进阶_EL_JSTL"><!--[--><!--]--> 04_JSP进阶_EL_JSTL <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/web/javaweb/05_Filter.md" class="" aria-label="05_Filter"><!--[--><!--]--> 05_Filter <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/web/javaweb/06_文件上传.md" class="" aria-label="06_文件上传"><!--[--><!--]--> 06_文件上传 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="框架学习"><span class="title">框架学习</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="框架学习"><span class="title">框架学习</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Mybatis</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/blog3/framework/mybatis/01_MyBatis快速入门.md" class="" aria-label="01_MyBatis快速入门"><!--[--><!--]--> 01_MyBatis快速入门 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/framework/mybatis/02_MyBatis进阶.md" class="" aria-label="02_MyBatis进阶"><!--[--><!--]--> 02_MyBatis进阶 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/framework/mybatis/03_MybatisPlus.md" class="" aria-label="03_MybatisPlus"><!--[--><!--]--> 03_MybatisPlus <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/framework/mybatis/04_tkMapper.md" class="" aria-label="04_tkMapper"><!--[--><!--]--> 04_tkMapper <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Spring</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/blog3/framework/spring/01_SpringIOC和DI.md" class="" aria-label="01_SpringIOC和DI"><!--[--><!--]--> 01_SpringIOC和DI <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/framework/spring/02_动态代理和SpringAOP.md" class="" aria-label="02_动态代理和SpringAOP"><!--[--><!--]--> 02_动态代理和SpringAOP <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/framework/spring/03_Spring整合MyBatis_声明式事务.md" class="" aria-label="03_Spring整合MyBatis_声明式事务"><!--[--><!--]--> 03_Spring整合MyBatis_声明式事务 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/framework/spring/04_Spring注解开发_整合Junit.md" class="" aria-label="04_Spring注解开发_整合Junit"><!--[--><!--]--> 04_Spring注解开发_整合Junit <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>SpringMVC</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/blog3/framework/springmvc/01_SpringMVC快速入门及解析.md" class="" aria-label="01_SpringMVC快速入门及解析.md"><!--[--><!--]--> 01_SpringMVC快速入门及解析.md <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/framework/springmvc/02_SpringMVC的响应和请求.md" class="" aria-label="02_SpringMVC的响应和请求.md"><!--[--><!--]--> 02_SpringMVC的响应和请求.md <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/framework/springmvc/03_SpringMVC文件上传下载及异常处理.md" class="" aria-label="03_SpringMVC文件上传下载及异常处理.md"><!--[--><!--]--> 03_SpringMVC文件上传下载及异常处理.md <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/framework/springmvc/04_SSM整合案例.md" class="" aria-label="04_SSM整合案例.md"><!--[--><!--]--> 04_SSM整合案例.md <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/framework/springmvc/05_SpringSecurity通用权限管理系统.md" class="" aria-label="05_SpringSecurity通用权限管理系统.md"><!--[--><!--]--> 05_SpringSecurity通用权限管理系统.md <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>SpringBoot</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/blog3/framework/springboot/01_SpringBoot_入门.md" class="" aria-label="01_SpringBoot_入门"><!--[--><!--]--> 01_SpringBoot_入门 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/framework/springboot/02_SpringBoot_进阶.md" class="" aria-label="02_SpringBoot_进阶"><!--[--><!--]--> 02_SpringBoot_进阶 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/framework/springboot/03_SpringBoot_Swagger2.md" class="" aria-label="03_SpringBoot_Swagger2"><!--[--><!--]--> 03_SpringBoot_Swagger2 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>前端框架(Vue)</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/blog3/framework/vue/01_ECMAScript6入门.md" class="" aria-label="01_ECMAScript6入门"><!--[--><!--]--> 01_ECMAScript6入门 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/framework/vue/02_Vue入门.md" class="" aria-label="02_Vue入门"><!--[--><!--]--> 02_Vue入门 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/framework/vue/03_Vue进阶.md" class="" aria-label="03_Vue进阶"><!--[--><!--]--> 03_Vue进阶 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/framework/vue/04_Wiki实战项目.md" class="" aria-label="04_Wiki实战项目"><!--[--><!--]--> 04_Wiki实战项目 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="SpringCloud"><span class="title">SpringCloud</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="SpringCloud"><span class="title">SpringCloud</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>docker</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/blog3/springCloud/docker/01_微服务架构演变.md" class="" aria-label="01_微服务的发展历史"><!--[--><!--]--> 01_微服务的发展历史 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/springCloud/docker/02_docker.md" class="" aria-label="02_docker"><!--[--><!--]--> 02_docker <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>redis</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/blog3/springCloud/redis/01_redis.md" class="" aria-label="01_redis"><!--[--><!--]--> 01_redis <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/springCloud/redis/02_redis.md" class="" aria-label="02_redis"><!--[--><!--]--> 02_redis <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/springCloud/redis/03_布隆过滤器.md" class="" aria-label="03_布隆过滤器"><!--[--><!--]--> 03_布隆过滤器 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>MQ</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/blog3/springCloud/MQ/01_rocketMQ.md" class="" aria-label="01_RocketMQ"><!--[--><!--]--> 01_RocketMQ <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>ElasticSearch</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/blog3/springCloud/elasticsearch/01_ElasticSearch.md" class="" aria-label="01_ElasticSearch"><!--[--><!--]--> 01_ElasticSearch <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>SpringCloudAlibaba</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/blog3/springCloud/springcloudalibaba/01_Nacos.md" class="" aria-label="01_Nacos"><!--[--><!--]--> 01_Nacos <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/springCloud/springcloudalibaba/02_Nacos.md" class="" aria-label="02_Nacos"><!--[--><!--]--> 02_Nacos <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/springCloud/springcloudalibaba/03_Sentinel.md" class="" aria-label="03_Sentinel"><!--[--><!--]--> 03_Sentinel <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/springCloud/springcloudalibaba/04_Sleuth.md" class="" aria-label="04_Sleuth"><!--[--><!--]--> 04_Sleuth <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/springCloud/springcloudalibaba/05_Gateway.md" class="" aria-label="05_Gateway"><!--[--><!--]--> 05_Gateway <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/springCloud/springcloudalibaba/06_Seata.md" class="" aria-label="06_Seata.md"><!--[--><!--]--> 06_Seata.md <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="SpringCloud综合项目"><span class="title">SpringCloud综合项目</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="SpringCloud综合项目"><span class="title">SpringCloud综合项目</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/blog3/springCloud/project/01_项目笔记.md" class="" aria-label="01_电子商城"><!--[--><!--]--> 01_电子商城 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/blog3/springCloud/project/02_单点登录SSO.md" class="" aria-label="02_单点登录SSO"><!--[--><!--]--> 02_单点登录SSO <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/blog3/springCloud/project/03_ElasticSearch在项目中做搜索的应用.md" class="" aria-label="03_ElasticSearch在项目中做搜索的应用"><!--[--><!--]--> 03_ElasticSearch在项目中做搜索的应用 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/blog3/springCloud/project/04_IdWorker.md" class="" aria-label="04_IdWorker"><!--[--><!--]--> 04_IdWorker <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/blog3/springCloud/project/05_微信支付.md" class="" aria-label="05_微信支付"><!--[--><!--]--> 05_微信支付 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/blog3/springCloud/project/06_git在项目中的使用.md" class="" aria-label="06_git在项目中的使用"><!--[--><!--]--> 06_git在项目中的使用 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/blog3/springCloud/project/07_网页静态化技术.md" class="" aria-label="07_网页静态化技术"><!--[--><!--]--> 07_网页静态化技术 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/blog3/springCloud/project/08_购物车.md" class="" aria-label="08_购物车"><!--[--><!--]--> 08_购物车 <!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/blog3/" class="" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="JavaSE"><span class="title">JavaSE</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="JavaSE"><span class="title">JavaSE</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>JavaSE基础</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/blog3/javase/basic/01_Java入门与开发环境搭建.md" class="" aria-label="01_Java入门与开发环境搭建"><!--[--><!--]--> 01_Java入门与开发环境搭建 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/javase/basic/04_方法.md" class="" aria-label="02_Java语言基础"><!--[--><!--]--> 02_Java语言基础 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/javase/basic/04_方法.md" class="" aria-label="03_控制流程"><!--[--><!--]--> 03_控制流程 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/javase/basic/04_方法.md" class="" aria-label="04_方法"><!--[--><!--]--> 04_方法 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/javase/basic/05_数组.md" class="" aria-label="05_数组"><!--[--><!--]--> 05_数组 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/javase/basic/06_面向对象基础.md" class="" aria-label="06_面向对象基础"><!--[--><!--]--> 06_面向对象基础 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/javase/basic/07_面向对象三大特征.md" class="" aria-label="07_面向对象三大特征"><!--[--><!--]--> 07_面向对象三大特征 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/javase/basic/08_三个修饰符.md" class="" aria-label="08_三个修饰符"><!--[--><!--]--> 08_三个修饰符 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/javase/basic/09_接口和内部类.md" class="" aria-label="09_接口和内部类"><!--[--><!--]--> 09_接口和内部类 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/javase/basic/10_常用类.md" class="" aria-label="10_常用类"><!--[--><!--]--> 10_常用类 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/javase/basic/11_集合.md" class="" aria-label="11_集合"><!--[--><!--]--> 11_集合 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/javase/basic/12_异常.md" class="" aria-label="12_异常"><!--[--><!--]--> 12_异常 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>JavaSE高级</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/blog3/javase/senior/01_IO.md" class="" aria-label="01_IO"><!--[--><!--]--> 01_IO <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/javase/senior/02_多线程.md" class="" aria-label="02_多线程"><!--[--><!--]--> 02_多线程 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/javase/senior/03_网络编程.md" class="" aria-label="03_网络编程"><!--[--><!--]--> 03_网络编程 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/javase/senior/04_反射.md" class="" aria-label="04_反射"><!--[--><!--]--> 04_反射 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/javase/senior/05_Java8新特性.md" class="" aria-label="05_Java8新特性"><!--[--><!--]--> 05_Java8新特性 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="工具|部署"><span class="title">工具|部署</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="工具|部署"><span class="title">工具|部署</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>IDEA</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/blog3/tool/idea/" class="" aria-label="简介"><!--[--><!--]--> 简介 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/tool/idea/01_IDEA配置_2019.md" class="" aria-label="01_IDEA配置_2019"><!--[--><!--]--> 01_IDEA配置_2019 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/tool/idea/02_IDEA配置_2020.md" class="" aria-label="02_IDEA配置_2020"><!--[--><!--]--> 02_IDEA配置_2020 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/tool/idea/03_IDEA快捷键.md" class="" aria-label="03_IDEA快捷键"><!--[--><!--]--> 03_IDEA快捷键 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Maven</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/blog3/tool/maven/01_Maven基础.md" class="" aria-label="01_Maven基础"><!--[--><!--]--> 01_Maven基础 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/springCloud/redis/02_Maven聚合工程.md" class="" aria-label="02_Maven聚合工程"><!--[--><!--]--> 02_Maven聚合工程 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>版本控制</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/blog3/tool/git/Git.md" class="" aria-label="Git基础教程"><!--[--><!--]--> Git基础教程 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Linux</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/blog3/tool/linux/01_Linux_安装.md" class="" aria-label="01_Linux_安装"><!--[--><!--]--> 01_Linux_安装 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/tool/linux/02_Linux_简介及常用命令.md" class="" aria-label="02_Linux_简介及常用命令"><!--[--><!--]--> 02_Linux_简介及常用命令 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/tool/linux/03_Linux_Vim使用.md" class="" aria-label="03_Linux_Vim使用"><!--[--><!--]--> 03_Linux_Vim使用 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/tool/linux/04_Linux_软件安装及Java开发环境搭建.md" class="" aria-label="04_Linux_软件安装及Java开发环境搭建"><!--[--><!--]--> 04_Linux_软件安装及Java开发环境搭建 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/tool/linux/05_Linux_搭建基于SFTP服务的文件服务器.md" class="" aria-label="05_Linux_搭建基于SFTP服务的文件服务器"><!--[--><!--]--> 05_Linux_搭建基于SFTP服务的文件服务器 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/tool/linux/06_Linux_防火墙FirewallD设置.md" class="" aria-label="06_Linux_防火墙FirewallD设置"><!--[--><!--]--> 06_Linux_防火墙FirewallD设置 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>代理服务器</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/blog3/tool/nginx/Nginx.md" class="" aria-label="Nginx基础教程"><!--[--><!--]--> Nginx基础教程 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="数据库"><span class="title">数据库</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="数据库"><span class="title">数据库</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>MySql</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/blog3/sql/mysql/01_MySQL概述.md" class="" aria-label="01_MySQL概述"><!--[--><!--]--> 01_MySQL概述 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/sql/mysql/02_MySQL安装及配置.md" class="" aria-label="02_MySQL安装及配置"><!--[--><!--]--> 02_MySQL安装及配置 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/sql/mysql/03_MySQL客户端工具.md" class="" aria-label="03_MySQL客户端工具"><!--[--><!--]--> 03_MySQL客户端工具 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/sql/mysql/04_SQL概述及DDL.md" class="" aria-label="04_SQL概述及DDL"><!--[--><!--]--> 04_SQL概述及DDL <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/sql/mysql/05_DML.md" class="" aria-label="05_DML"><!--[--><!--]--> 05_DML <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/sql/mysql/06_约束.md" class="" aria-label="06_约束"><!--[--><!--]--> 06_约束 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/sql/mysql/07_DQL.md" class="" aria-label="07_DQL"><!--[--><!--]--> 07_DQL <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/sql/mysql/08_DCL.md" class="" aria-label="08_DCL"><!--[--><!--]--> 08_DCL <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/sql/mysql/09_TPL.md" class="" aria-label="09_TPL"><!--[--><!--]--> 09_TPL <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/sql/mysql/10_视图.md" class="" aria-label="10_视图"><!--[--><!--]--> 10_视图 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/sql/mysql/11_常用函数.md" class="" aria-label="11_常用函数"><!--[--><!--]--> 11_常用函数 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/sql/mysql/12_变量_存储过程_函数.md" class="" aria-label="12_变量_存储过程_函数"><!--[--><!--]--> 12_变量_存储过程_函数 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>JDBC</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/blog3/sql/jdbc/01_JDBC.md" class="" aria-label="01_JDBC"><!--[--><!--]--> 01_JDBC <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/sql/jdbc/02_数据库连接池.md" class="" aria-label="02_数据库连接池"><!--[--><!--]--> 02_数据库连接池 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/sql/jdbc/03_事务.md" class="" aria-label="03_事务"><!--[--><!--]--> 03_事务 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/sql/jdbc/04_Commons_DbUtils.md" class="" aria-label="04_Commons_DbUtils"><!--[--><!--]--> 04_Commons_DbUtils <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Web开发"><span class="title">Web开发</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Web开发"><span class="title">Web开发</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>前端基础</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/blog3/web/view/01_HTML.md" class="" aria-label="01_HTML"><!--[--><!--]--> 01_HTML <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/web/view/02_CSS.md" class="" aria-label="02_CSS"><!--[--><!--]--> 02_CSS <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/web/view/03_JavaScript.md" class="" aria-label="03_JavaScript"><!--[--><!--]--> 03_JavaScript <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/web/view/04_jQuery.md" class="" aria-label="04_jQuery"><!--[--><!--]--> 04_jQuery <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/web/view/05_BootStrap.md" class="" aria-label="05_BootStrap"><!--[--><!--]--> 05_BootStrap <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/web/view/06_Ajax_JSON.md" class="" aria-label="06_Ajax_JSON"><!--[--><!--]--> 06_Ajax_JSON <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>JavaWeb</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/blog3/web/javaweb/01_Web开发基础.md" class="" aria-label="01_Web开发基础"><!--[--><!--]--> 01_Web开发基础 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/web/javaweb/02_Servlet.md" class="" aria-label="02_Servlet"><!--[--><!--]--> 02_Servlet <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/web/javaweb/03_JSP入门_Cookie_Session.md" class="" aria-label="03_JSP入门_Cookie_Session"><!--[--><!--]--> 03_JSP入门_Cookie_Session <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/web/javaweb/04_JSP进阶_EL_JSTL.md" class="" aria-label="04_JSP进阶_EL_JSTL"><!--[--><!--]--> 04_JSP进阶_EL_JSTL <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/web/javaweb/05_Filter.md" class="" aria-label="05_Filter"><!--[--><!--]--> 05_Filter <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/web/javaweb/06_文件上传.md" class="" aria-label="06_文件上传"><!--[--><!--]--> 06_文件上传 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="框架学习"><span class="title">框架学习</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="框架学习"><span class="title">框架学习</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Mybatis</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/blog3/framework/mybatis/01_MyBatis快速入门.md" class="" aria-label="01_MyBatis快速入门"><!--[--><!--]--> 01_MyBatis快速入门 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/framework/mybatis/02_MyBatis进阶.md" class="" aria-label="02_MyBatis进阶"><!--[--><!--]--> 02_MyBatis进阶 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/framework/mybatis/03_MybatisPlus.md" class="" aria-label="03_MybatisPlus"><!--[--><!--]--> 03_MybatisPlus <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/framework/mybatis/04_tkMapper.md" class="" aria-label="04_tkMapper"><!--[--><!--]--> 04_tkMapper <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Spring</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/blog3/framework/spring/01_SpringIOC和DI.md" class="" aria-label="01_SpringIOC和DI"><!--[--><!--]--> 01_SpringIOC和DI <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/framework/spring/02_动态代理和SpringAOP.md" class="" aria-label="02_动态代理和SpringAOP"><!--[--><!--]--> 02_动态代理和SpringAOP <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/framework/spring/03_Spring整合MyBatis_声明式事务.md" class="" aria-label="03_Spring整合MyBatis_声明式事务"><!--[--><!--]--> 03_Spring整合MyBatis_声明式事务 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/framework/spring/04_Spring注解开发_整合Junit.md" class="" aria-label="04_Spring注解开发_整合Junit"><!--[--><!--]--> 04_Spring注解开发_整合Junit <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>SpringMVC</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/blog3/framework/springmvc/01_SpringMVC快速入门及解析.md" class="" aria-label="01_SpringMVC快速入门及解析.md"><!--[--><!--]--> 01_SpringMVC快速入门及解析.md <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/framework/springmvc/02_SpringMVC的响应和请求.md" class="" aria-label="02_SpringMVC的响应和请求.md"><!--[--><!--]--> 02_SpringMVC的响应和请求.md <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/framework/springmvc/03_SpringMVC文件上传下载及异常处理.md" class="" aria-label="03_SpringMVC文件上传下载及异常处理.md"><!--[--><!--]--> 03_SpringMVC文件上传下载及异常处理.md <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/framework/springmvc/04_SSM整合案例.md" class="" aria-label="04_SSM整合案例.md"><!--[--><!--]--> 04_SSM整合案例.md <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/framework/springmvc/05_SpringSecurity通用权限管理系统.md" class="" aria-label="05_SpringSecurity通用权限管理系统.md"><!--[--><!--]--> 05_SpringSecurity通用权限管理系统.md <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>SpringBoot</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/blog3/framework/springboot/01_SpringBoot_入门.md" class="" aria-label="01_SpringBoot_入门"><!--[--><!--]--> 01_SpringBoot_入门 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/framework/springboot/02_SpringBoot_进阶.md" class="" aria-label="02_SpringBoot_进阶"><!--[--><!--]--> 02_SpringBoot_进阶 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/framework/springboot/03_SpringBoot_Swagger2.md" class="" aria-label="03_SpringBoot_Swagger2"><!--[--><!--]--> 03_SpringBoot_Swagger2 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>前端框架(Vue)</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/blog3/framework/vue/01_ECMAScript6入门.md" class="" aria-label="01_ECMAScript6入门"><!--[--><!--]--> 01_ECMAScript6入门 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/framework/vue/02_Vue入门.md" class="" aria-label="02_Vue入门"><!--[--><!--]--> 02_Vue入门 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/framework/vue/03_Vue进阶.md" class="" aria-label="03_Vue进阶"><!--[--><!--]--> 03_Vue进阶 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/framework/vue/04_Wiki实战项目.md" class="" aria-label="04_Wiki实战项目"><!--[--><!--]--> 04_Wiki实战项目 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="SpringCloud"><span class="title">SpringCloud</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="SpringCloud"><span class="title">SpringCloud</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>docker</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/blog3/springCloud/docker/01_微服务架构演变.md" class="" aria-label="01_微服务的发展历史"><!--[--><!--]--> 01_微服务的发展历史 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/springCloud/docker/02_docker.md" class="" aria-label="02_docker"><!--[--><!--]--> 02_docker <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>redis</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/blog3/springCloud/redis/01_redis.md" class="" aria-label="01_redis"><!--[--><!--]--> 01_redis <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/springCloud/redis/02_redis.md" class="" aria-label="02_redis"><!--[--><!--]--> 02_redis <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/springCloud/redis/03_布隆过滤器.md" class="" aria-label="03_布隆过滤器"><!--[--><!--]--> 03_布隆过滤器 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>MQ</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/blog3/springCloud/MQ/01_rocketMQ.md" class="" aria-label="01_RocketMQ"><!--[--><!--]--> 01_RocketMQ <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>ElasticSearch</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/blog3/springCloud/elasticsearch/01_ElasticSearch.md" class="" aria-label="01_ElasticSearch"><!--[--><!--]--> 01_ElasticSearch <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>SpringCloudAlibaba</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/blog3/springCloud/springcloudalibaba/01_Nacos.md" class="" aria-label="01_Nacos"><!--[--><!--]--> 01_Nacos <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/springCloud/springcloudalibaba/02_Nacos.md" class="" aria-label="02_Nacos"><!--[--><!--]--> 02_Nacos <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/springCloud/springcloudalibaba/03_Sentinel.md" class="" aria-label="03_Sentinel"><!--[--><!--]--> 03_Sentinel <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/springCloud/springcloudalibaba/04_Sleuth.md" class="" aria-label="04_Sleuth"><!--[--><!--]--> 04_Sleuth <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/springCloud/springcloudalibaba/05_Gateway.md" class="" aria-label="05_Gateway"><!--[--><!--]--> 05_Gateway <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/blog3/springCloud/springcloudalibaba/06_Seata.md" class="" aria-label="06_Seata.md"><!--[--><!--]--> 06_Seata.md <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="SpringCloud综合项目"><span class="title">SpringCloud综合项目</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="SpringCloud综合项目"><span class="title">SpringCloud综合项目</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/blog3/springCloud/project/01_项目笔记.md" class="" aria-label="01_电子商城"><!--[--><!--]--> 01_电子商城 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/blog3/springCloud/project/02_单点登录SSO.md" class="" aria-label="02_单点登录SSO"><!--[--><!--]--> 02_单点登录SSO <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/blog3/springCloud/project/03_ElasticSearch在项目中做搜索的应用.md" class="" aria-label="03_ElasticSearch在项目中做搜索的应用"><!--[--><!--]--> 03_ElasticSearch在项目中做搜索的应用 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/blog3/springCloud/project/04_IdWorker.md" class="" aria-label="04_IdWorker"><!--[--><!--]--> 04_IdWorker <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/blog3/springCloud/project/05_微信支付.md" class="" aria-label="05_微信支付"><!--[--><!--]--> 05_微信支付 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/blog3/springCloud/project/06_git在项目中的使用.md" class="" aria-label="06_git在项目中的使用"><!--[--><!--]--> 06_git在项目中的使用 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/blog3/springCloud/project/07_网页静态化技术.md" class="" aria-label="07_网页静态化技术"><!--[--><!--]--> 07_网页静态化技术 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/blog3/springCloud/project/08_购物车.md" class="" aria-label="08_购物车"><!--[--><!--]--> 08_购物车 <!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><a aria-current="page" href="/blog3/springCloud/redis/01_redis.html" class="router-link-active router-link-exact-active router-link-active sidebar-item sidebar-heading active" aria-label="二：Redis简介"><!--[--><!--]--> 二：Redis简介 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blog3/springCloud/redis/01_redis.html#_2-1-redis简介" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.1：Redis简介"><!--[--><!--]--> 2.1：Redis简介 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog3/springCloud/redis/01_redis.html#_2-2-redis特性" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.2：Redis特性"><!--[--><!--]--> 2.2：Redis特性 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog3/springCloud/redis/01_redis.html#_2-3-redis-使用场景" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.3：Redis:使用场景"><!--[--><!--]--> 2.3：Redis:使用场景 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog3/springCloud/redis/01_redis.html#window安装redis" class="router-link-active router-link-exact-active sidebar-item" aria-label="Window安装Redis"><!--[--><!--]--> Window安装Redis <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog3/springCloud/redis/01_redis.html#linux安装redis" class="router-link-active router-link-exact-active sidebar-item" aria-label="Linux安装Redis"><!--[--><!--]--> Linux安装Redis <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog3/springCloud/redis/01_redis.html#_4-1-string" class="router-link-active router-link-exact-active sidebar-item" aria-label="4.1：String"><!--[--><!--]--> 4.1：String <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog3/springCloud/redis/01_redis.html#_4-2-list" class="router-link-active router-link-exact-active sidebar-item" aria-label="4.2：List"><!--[--><!--]--> 4.2：List <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog3/springCloud/redis/01_redis.html#_4-3-set" class="router-link-active router-link-exact-active sidebar-item" aria-label="4.3：Set"><!--[--><!--]--> 4.3：Set <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog3/springCloud/redis/01_redis.html#_4-4-hash" class="router-link-active router-link-exact-active sidebar-item" aria-label="4.4：Hash"><!--[--><!--]--> 4.4：Hash <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog3/springCloud/redis/01_redis.html#_4-5-zset-sorted-set" class="router-link-active router-link-exact-active sidebar-item" aria-label="4.5：Zset(sorted set)"><!--[--><!--]--> 4.5：Zset(sorted set) <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog3/springCloud/redis/01_redis.html#pom依赖" class="router-link-active router-link-exact-active sidebar-item" aria-label="pom依赖"><!--[--><!--]--> pom依赖 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog3/springCloud/redis/01_redis.html#java代码" class="router-link-active router-link-exact-active sidebar-item" aria-label="java代码"><!--[--><!--]--> java代码 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog3/springCloud/redis/01_redis.html#_8-1-基于springboot" class="router-link-active router-link-exact-active sidebar-item" aria-label="8.1：基于springboot"><!--[--><!--]--> 8.1：基于springboot <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog3/springCloud/redis/01_redis.html#_8-2-基于xml配置" class="router-link-active router-link-exact-active sidebar-item" aria-label="8.2：基于xml配置"><!--[--><!--]--> 8.2：基于xml配置 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog3/springCloud/redis/01_redis.html#_9-1-短信验证码" class="router-link-active router-link-exact-active sidebar-item" aria-label="9.1：短信验证码"><!--[--><!--]--> 9.1：短信验证码 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blog3/springCloud/redis/01_redis.html#vscode" class="router-link-active router-link-exact-active sidebar-item" aria-label="vscode"><!--[--><!--]--> vscode <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog3/springCloud/redis/01_redis.html#阿里大于" class="router-link-active router-link-exact-active sidebar-item" aria-label="阿里大于"><!--[--><!--]--> 阿里大于 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog3/springCloud/redis/01_redis.html#功能一-短信发送" class="router-link-active router-link-exact-active sidebar-item" aria-label="功能一：短信发送"><!--[--><!--]--> 功能一：短信发送 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog3/springCloud/redis/01_redis.html#功能二-验证短信" class="router-link-active router-link-exact-active sidebar-item" aria-label="功能二：验证短信"><!--[--><!--]--> 功能二：验证短信 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/blog3/springCloud/redis/01_redis.html#_9-2-redis查询缓存" class="router-link-active router-link-exact-active sidebar-item" aria-label="9.2：Redis查询缓存"><!--[--><!--]--> 9.2：Redis查询缓存 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog3/springCloud/redis/01_redis.html#_10-1-rdb" class="router-link-active router-link-exact-active sidebar-item" aria-label="10.1：RDB"><!--[--><!--]--> 10.1：RDB <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blog3/springCloud/redis/01_redis.html#rdb持久化方案的特点" class="router-link-active router-link-exact-active sidebar-item" aria-label="RDB持久化方案的特点"><!--[--><!--]--> RDB持久化方案的特点 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog3/springCloud/redis/01_redis.html#rdb相关配置" class="router-link-active router-link-exact-active sidebar-item" aria-label="rdb相关配置"><!--[--><!--]--> rdb相关配置 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog3/springCloud/redis/01_redis.html#触发方式" class="router-link-active router-link-exact-active sidebar-item" aria-label="触发方式"><!--[--><!--]--> 触发方式 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/blog3/springCloud/redis/01_redis.html#_10-2-aof" class="router-link-active router-link-exact-active sidebar-item" aria-label="10.2：AOF"><!--[--><!--]--> 10.2：AOF <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blog3/springCloud/redis/01_redis.html#aof持久化方案的特点" class="router-link-active router-link-exact-active sidebar-item" aria-label="AOF持久化方案的特点"><!--[--><!--]--> AOF持久化方案的特点 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog3/springCloud/redis/01_redis.html#aof相关配置" class="router-link-active router-link-exact-active sidebar-item" aria-label="AOF相关配置"><!--[--><!--]--> AOF相关配置 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog3/springCloud/redis/01_redis.html#触发方式-1" class="router-link-active router-link-exact-active sidebar-item" aria-label="触发方式"><!--[--><!--]--> 触发方式 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog3/springCloud/redis/01_redis.html#aof重写" class="router-link-active router-link-exact-active sidebar-item" aria-label="AOF重写"><!--[--><!--]--> AOF重写 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/blog3/springCloud/redis/01_redis.html#_10-3-rdb对比aof" class="router-link-active router-link-exact-active sidebar-item" aria-label="10.3：RDB对比AOF"><!--[--><!--]--> 10.3：RDB对比AOF <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog3/springCloud/redis/01_redis.html#集群配置" class="router-link-active router-link-exact-active sidebar-item" aria-label="集群配置"><!--[--><!--]--> 集群配置 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog3/springCloud/redis/01_redis.html#哨兵模式介绍" class="router-link-active router-link-exact-active sidebar-item" aria-label="哨兵模式介绍"><!--[--><!--]--> 哨兵模式介绍 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog3/springCloud/redis/01_redis.html#哨兵模式配置" class="router-link-active router-link-exact-active sidebar-item" aria-label="哨兵模式配置"><!--[--><!--]--> 哨兵模式配置 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blog3/springCloud/redis/01_redis.html#基于springboot" class="router-link-active router-link-exact-active sidebar-item" aria-label="基于springboot"><!--[--><!--]--> 基于springboot <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog3/springCloud/redis/01_redis.html#基于xml配置" class="router-link-active router-link-exact-active sidebar-item" aria-label="基于xml配置"><!--[--><!--]--> 基于xml配置 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/blog3/springCloud/redis/01_redis.html#分布式集群架构" class="router-link-active router-link-exact-active sidebar-item" aria-label="分布式集群架构"><!--[--><!--]--> 分布式集群架构 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog3/springCloud/redis/01_redis.html#分布式集群搭建" class="router-link-active router-link-exact-active sidebar-item" aria-label="分布式集群搭建"><!--[--><!--]--> 分布式集群搭建 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog3/springCloud/redis/01_redis.html#分布式集群-java客户端连接" class="router-link-active router-link-exact-active sidebar-item" aria-label="分布式集群(java客户端连接)"><!--[--><!--]--> 分布式集群(java客户端连接) <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog3/springCloud/redis/01_redis.html#_14-1-缓存击穿" class="router-link-active router-link-exact-active sidebar-item" aria-label="14.1：缓存击穿"><!--[--><!--]--> 14.1：缓存击穿 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog3/springCloud/redis/01_redis.html#_14-2-缓存穿透" class="router-link-active router-link-exact-active sidebar-item" aria-label="14.2：缓存穿透"><!--[--><!--]--> 14.2：缓存穿透 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog3/springCloud/redis/01_redis.html#_14-3-缓存雪崩" class="router-link-active router-link-exact-active sidebar-item" aria-label="14.3：缓存雪崩"><!--[--><!--]--> 14.3：缓存雪崩 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog3/springCloud/redis/01_redis.html#_15-1-redis内存满了怎么办" class="router-link-active router-link-exact-active sidebar-item" aria-label="15.1：Redis内存满了怎么办？"><!--[--><!--]--> 15.1：Redis内存满了怎么办？ <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blog3/springCloud/redis/01_redis.html#_1、通过配置文件配置" class="router-link-active router-link-exact-active sidebar-item" aria-label="1、通过配置文件配置"><!--[--><!--]--> 1、通过配置文件配置 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog3/springCloud/redis/01_redis.html#_2、通过命令修改" class="router-link-active router-link-exact-active sidebar-item" aria-label="2、通过命令修改"><!--[--><!--]--> 2、通过命令修改 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog3/springCloud/redis/01_redis.html#redis的内存淘汰" class="router-link-active router-link-exact-active sidebar-item" aria-label="Redis的内存淘汰"><!--[--><!--]--> Redis的内存淘汰 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog3/springCloud/redis/01_redis.html#如何获取及设置内存淘汰策略" class="router-link-active router-link-exact-active sidebar-item" aria-label="如何获取及设置内存淘汰策略"><!--[--><!--]--> 如何获取及设置内存淘汰策略 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/blog3/springCloud/redis/01_redis.html#_15-2-为什么删除数据后-redis内存占用依然很高" class="router-link-active router-link-exact-active sidebar-item" aria-label="15.2：为什么删除数据后，Redis内存占用依然很高？"><!--[--><!--]--> 15.2：为什么删除数据后，Redis内存占用依然很高？ <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blog3/springCloud/redis/01_redis.html#_1-什么是内存碎片" class="router-link-active router-link-exact-active sidebar-item" aria-label="1.什么是内存碎片？"><!--[--><!--]--> 1.什么是内存碎片？ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog3/springCloud/redis/01_redis.html#_2-为什么会出现内存碎片" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.为什么会出现内存碎片"><!--[--><!--]--> 2.为什么会出现内存碎片 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog3/springCloud/redis/01_redis.html#_3-如何判断存在内存碎片" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.如何判断存在内存碎片？"><!--[--><!--]--> 3.如何判断存在内存碎片？ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog3/springCloud/redis/01_redis.html#_4-如何清理内存碎片" class="router-link-active router-link-exact-active sidebar-item" aria-label="4.如何清理内存碎片？"><!--[--><!--]--> 4.如何清理内存碎片？ <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/blog3/springCloud/redis/01_redis.html#_15-3-redis6的新特性" class="router-link-active router-link-exact-active sidebar-item" aria-label="15.3：Redis6的新特性"><!--[--><!--]--> 15.3：Redis6的新特性 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="二-redis简介" tabindex="-1"><a class="header-anchor" href="#二-redis简介" aria-hidden="true">#</a> 二：Redis简介</h1><h2 id="_2-1-redis简介" tabindex="-1"><a class="header-anchor" href="#_2-1-redis简介" aria-hidden="true">#</a> 2.1：Redis简介</h2><p>官网：https://redis.io/</p><div class="language-txt ext-txt line-numbers-mode"><pre class="language-txt"><code>Redis is an open source (BSD licensed), in-memory data structure store, used as a database, cache, and message broker. Redis provides data structures such as strings, hashes, lists, sets, sorted sets with range queries, bitmaps, hyperloglogs, geospatial indexes, and streams. Redis has built-in replication, Lua scripting, LRU eviction, transactions, and different levels of on-disk persistence, and provides high availability via Redis Sentinel and automatic partitioning with Redis Cluster
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><blockquote><p>Redis 是完全开源的，C语言编写，基于内存，是一个高性能的 Nosql（非关系型） 数据库。</p></blockquote><div class="language-txt ext-txt line-numbers-mode"><pre class="language-txt"><code>一.关系型数据库（mysql、oracle、PostgreSQL）
定义：关系型数据库最典型的数据结构是表，由二维表及其之间的联系所组成的一个数据组织.
【优点：】
1.易于维护：都是使用表结构，格式一致；
2.使用方便：SQL语言通用，可用于复杂查询，可用于一个表及多个表之间非常复杂关联查询；
【缺点：】
1.关系型数据库操作的是磁盘，硬盘I/O是一个很大的瓶颈
2.固定的表结构，灵活度稍欠；


稀疏型
{name:&#39;jack&#39;}
{course:&#39;java&#39;}
{name:&#39;jack,sex:&#39;1&#39;}

二.非关系型数据库（Redis(KV)、Memcache（KV）、ElasticSearch(JSON)）
定义：非关系型数据库是一种数据结构化存储方法的集合，可以是文档或者键值对。
【优点：】
1.格式灵活：存储数据的格式可以是key,value形式、文档形式。
2.速度快：nosql可以使用内存存储，而关系型数据库只能使用硬盘；
【缺点：】
不支持sql，数据间没有关联关系
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_2-2-redis特性" tabindex="-1"><a class="header-anchor" href="#_2-2-redis特性" aria-hidden="true">#</a> 2.2：Redis特性</h2><div class="language-txt ext-txt line-numbers-mode"><pre class="language-txt"><code>1、性能极高 – Redis 读的速度是110000次/s,写的速度是81000次/s 。
2、丰富的数据类型 – Redis支持五种数据类型：string（字符串），hash（哈希），list（列表），set（集合）及zset(sorted set：有序集合)
3、原子 – Redis的所有操作都是原子性的，意思就是要么成功执行要么失败完全不执行。单个操作是原子性的。多个操作也支持事务 
4、丰富的特性 – Redis还支持 publish/subscribe, 通知, key 过期等等特性。
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-txt ext-txt line-numbers-mode"><pre class="language-txt"><code>Redis 与其他 key - value（Memcache） 缓存产品有以下三个特点：
1：Redis支持数据的持久化，可以将内存中的数据保存在磁盘中，重启的时候可以再次加载进行使用。
2：Redis不仅仅支持简单的key-value类型的数据，同时还提供list，set，zset，hash等数据结构的存储。
3：Redis支持数据的备份，即master-slave模式的数据备份。
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_2-3-redis-使用场景" tabindex="-1"><a class="header-anchor" href="#_2-3-redis-使用场景" aria-hidden="true">#</a> 2.3：Redis:使用场景</h2><div class="language-txt ext-txt line-numbers-mode"><pre class="language-txt"><code>1：查询缓存
2：分布式锁 setnx
3：秒杀活动数据存储(将Redis当做database来存储商品信息以及用户的下单信息)
4：注册、登录 使用Redis存储验证码（Redis的key可以设置过期时间）
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="三-redis安装" tabindex="-1"><a class="header-anchor" href="#三-redis安装" aria-hidden="true">#</a> 三：Redis安装</h1><h2 id="window安装redis" tabindex="-1"><a class="header-anchor" href="#window安装redis" aria-hidden="true">#</a> Window安装Redis</h2><blockquote><p>下载地址：https://github.com/microsoftarchive/redis/releases</p></blockquote><p><img src="/blog3/assets/image-20200928150936812.ba1bd601.png" alt="image-20200928150936812"></p><p><img src="/blog3/assets/image-20200928151038244.89b7c082.png" alt="image-20200928151038244"></p><h2 id="linux安装redis" tabindex="-1"><a class="header-anchor" href="#linux安装redis" aria-hidden="true">#</a> Linux安装Redis</h2><blockquote><p>redis-6.0.8.tar.gz</p><p>注意：redis6版本要求gcc版本必须5.3以上，centos7默认安装的版本是4.8.5，查看gcc版本命令 gcc-v</p></blockquote><p>升级gcc,以下每行命令依次执行即可升级gcc到9.3.1</p><div class="language-she ext-she line-numbers-mode"><pre class="language-she"><code>yum -y install centos-release-scl
yum -y install devtoolset-9-gcc devtoolset-9-gcc-c++ devtoolset-9-binutils
scl enable devtoolset-9 bash
echo &quot;source /opt/rh/devtoolset-9/enable&quot; &gt;&gt;/etc/profile　　--使永久生效

yum install tcl -y
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>上传redis的压缩包到服务器,并解压</p><p>（如果之前安装过，server下有redis*，先到server下，执行rm -rf ./redis* * ）</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@zhuxm01 soft<span class="token punctuation">]</span><span class="token comment"># tar -zxvf redis-6.0.8.tar.gz  -C /export/server/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>编译（ 在redis的解压路径执行以下命令)</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@zhuxm01 redis-6.0.8<span class="token punctuation">]</span><span class="token comment"># cd /export/server/redis-6.0.8/</span>
<span class="token punctuation">[</span>root@zhuxm01 redis-6.0.8<span class="token punctuation">]</span><span class="token comment"># make</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>安装</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@zhuxm01 redis-6.0.8<span class="token punctuation">]</span><span class="token comment"># cd /export/server/redis-6.0.8/</span>
<span class="token punctuation">[</span>root@zhuxm01 redis-6.0.8<span class="token punctuation">]</span><span class="token comment"># make PREFIX=/export/server/redis install</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="/blog3/assets/image-20200928152525279.fd5d887d.png" alt="image-20200928152525279"></p><p>前台启动(先切换到 /export/server/redis/bin，在执行./redis-server)</p><p><img src="/blog3/assets/image-20200928152611117.c020f825.png" alt="image-20200928152611117"></p><h1 id="四-redis数据类型" tabindex="-1"><a class="header-anchor" href="#四-redis数据类型" aria-hidden="true">#</a> 四：Redis数据类型</h1><blockquote><p>K string</p><p>V String</p></blockquote><h2 id="_4-1-string" tabindex="-1"><a class="header-anchor" href="#_4-1-string" aria-hidden="true">#</a> 4.1：String</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">set</span> k <span class="token function">v</span>
get k
del k
strlen k
<span class="token comment">#自加、自减</span>
incr article
incrby article <span class="token number">3</span>
decr article
decyby article

<span class="token comment">#value字符串操作</span>
getrange name <span class="token number">0</span> <span class="token parameter variable">-1</span> <span class="token comment">#取整个字符串</span>
getrange name <span class="token number">0</span>  <span class="token number">1</span>
setrange name <span class="token number">0</span> x

<span class="token comment"># SETEX 是一个原子性(atomic)操作，设置值和设置生存时间两个动作会在同一时间内完成</span>
SETEX pro <span class="token number">10</span> 华为    （查看剩余时间ttl pro）   
<span class="token builtin class-name">set</span> pro 华为
expire pro <span class="token number">10</span>


<span class="token comment">#在分布式系统里面可以使用如下命令实现分布式锁</span>
setnx<span class="token punctuation">(</span>set <span class="token keyword">if</span> not exist<span class="token punctuation">)</span>

如果返回1：设置成功
如果返回0：设置失败

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_4-2-list" tabindex="-1"><a class="header-anchor" href="#_4-2-list" aria-hidden="true">#</a> 4.2：List</h2><blockquote><p>K string</p><p>V List</p><p>list特点：有序、可重复</p></blockquote><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>存
lpush num <span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span> <span class="token number">4</span> <span class="token number">5</span>
rpush num2 <span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span> <span class="token number">4</span> <span class="token number">5</span>
查
lrange num <span class="token number">0</span> <span class="token parameter variable">-1</span>
lrange num2 <span class="token number">0</span> <span class="token parameter variable">-1</span>
<span class="token comment">#根据下标获取元素</span>
LINDEX key index

弹出（获取数据的同时将数据从list中删除）
lpop
rpop

大小
LLEN key


<span class="token comment">#队列:先进先出</span>
lpush num3 <span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span>  <span class="token comment">#左边推进去</span>
rpop num3 <span class="token number">1</span>       <span class="token comment">#右边取出来</span>
或者
rpush num4 <span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span>
lpop num4


<span class="token comment">#栈:先进后出</span>
lpush num5 <span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span>
lpop num5
或者
rpush num6 <span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span>
rpop num6

<span class="token comment">#list的长度</span>
llen num5
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_4-3-set" tabindex="-1"><a class="header-anchor" href="#_4-3-set" aria-hidden="true">#</a> 4.3：Set</h2><blockquote><p>K string</p><p>V Set</p><p>set特点：无序，不可重复</p></blockquote><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>存
sadd ips <span class="token string">&#39;192.168.22.1&#39;</span> <span class="token string">&#39;192.168.22.2&#39;</span> <span class="token string">&#39;192.168.22.2&#39;</span>
查
smembers ips
SISMEMBER key member

删
srem ips <span class="token string">&#39;192.168.22.1&#39;</span>
大小
scard ips <span class="token comment">#获取set的长度</span>


<span class="token comment">#随机</span>
sadd nums <span class="token number">3</span> <span class="token number">4</span> <span class="token number">5</span> <span class="token number">0</span> <span class="token number">9</span> <span class="token number">8</span> <span class="token number">9</span> <span class="token number">0</span> <span class="token number">8</span> <span class="token number">6</span> 
srandmember nums <span class="token number">3</span>
<span class="token comment">#随机并移除</span>
spop rands <span class="token number">3</span>


交集
redis <span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> SADD myset <span class="token string">&quot;hello&quot;</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
redis <span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> SADD myset <span class="token string">&quot;foo&quot;</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
redis <span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> SADD myset <span class="token string">&quot;bar&quot;</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span>
redis <span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> SADD myset2 <span class="token string">&quot;hello&quot;</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
redis <span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> SADD myset2 <span class="token string">&quot;world&quot;</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
redis <span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> SINTER myset myset2
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;hello&quot;</span>

并集
redis<span class="token operator">&gt;</span> SADD key1 <span class="token string">&quot;a&quot;</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
redis<span class="token operator">&gt;</span> SADD key1 <span class="token string">&quot;b&quot;</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
redis<span class="token operator">&gt;</span> SADD key1 <span class="token string">&quot;c&quot;</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
redis<span class="token operator">&gt;</span> SADD key2 <span class="token string">&quot;c&quot;</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
redis<span class="token operator">&gt;</span> SADD key2 <span class="token string">&quot;d&quot;</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
redis<span class="token operator">&gt;</span> SADD key2 <span class="token string">&quot;e&quot;</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
redis<span class="token operator">&gt;</span> SUNION key1 key2
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;a&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;c&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;b&quot;</span>
<span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">&quot;e&quot;</span>
<span class="token number">5</span><span class="token punctuation">)</span> <span class="token string">&quot;d&quot;</span>
redis<span class="token operator">&gt;</span> 

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_4-4-hash" tabindex="-1"><a class="header-anchor" href="#_4-4-hash" aria-hidden="true">#</a> 4.4：Hash</h2><blockquote><p>K string</p><p>V Hash</p><p>hash特点：hash的key不能重复，如果重复就覆盖</p></blockquote><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>存
hset person name <span class="token string">&#39;jack&#39;</span>
hset person age <span class="token number">40</span>
取
hget person name
hget person age

存多个
hmset person name <span class="token string">&#39;rose&#39;</span> age <span class="token number">12</span>
大小
hlen person
判断k是否存在
hexists person age


hkeys person
hvals person

person  <span class="token string">&quot;{&#39;name&#39;:&#39;zhangsan&#39;}&quot;</span>

<span class="token comment">#hash可以大大减少redis中的K  同时hash结构特别适合存放对象</span>
person <span class="token builtin class-name">:</span>
        name   <span class="token string">&#39;jack&#39;</span>
        age   <span class="token string">&#39;18&#39;</span> 
hget  person age

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_4-5-zset-sorted-set" tabindex="-1"><a class="header-anchor" href="#_4-5-zset-sorted-set" aria-hidden="true">#</a> 4.5：Zset(sorted set)</h2><blockquote><p>K string</p><p>V ZSet</p><p>zset特点：有序，不可重复，通过score来进行排序，score必须是数字</p></blockquote><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>通过score进行排序
zadd hot <span class="token number">300</span> <span class="token string">&#39;华为met10&#39;</span> <span class="token number">10</span> <span class="token string">&#39;苹果10&#39;</span>  <span class="token number">19</span> <span class="token string">&#39;小米&#39;</span>
zrange hot <span class="token number">0</span> <span class="token parameter variable">-1</span>
zrevrange hot <span class="token number">0</span> <span class="token parameter variable">-1</span>

<span class="token comment">#分数范围过滤</span>
zrangebyscore hot <span class="token number">11</span> <span class="token number">100</span>
zrangebyscore hot <span class="token number">10</span> <span class="token number">100</span> limit <span class="token number">0</span> <span class="token number">1</span>


<span class="token comment">#删除</span>
zrem hot <span class="token string">&#39;小米&#39;</span>
zcard hot <span class="token comment">#查看集合的元素个数</span>


</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="五-其他指令" tabindex="-1"><a class="header-anchor" href="#五-其他指令" aria-hidden="true">#</a> 五：其他指令</h1><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#########################key相关指令##############</span>
keys parttern
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> keys art*
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;article2&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;artile1&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> 

<span class="token comment">#如果存在返回1，否则返回0</span>
exists key


del key

<span class="token comment">#给key设置过期时间</span>
expire key seconds
<span class="token comment">#查看key的剩余时间  -1：表示没有过期时间  &gt;0 表示剩余的时间 -2:过期，数据被回收</span>
ttl key
<span class="token comment">#不设置过期时间，让它常驻内存</span>
persist key 



<span class="token comment">################db相关的指令##########################</span>

Redis有16个db  分别为0，1,<span class="token punctuation">..</span>.,15【redis的默认数据库为0】
<span class="token comment">#切换数据库</span>
<span class="token keyword">select</span> index
<span class="token comment">#清空数据库</span>
flushdb
<span class="token comment">#清空所有的数据库</span>
flushall
<span class="token comment">#数据库的数据总条数</span>
dbsize

<span class="token comment">#最近一次保存数据的时间戳</span>
lastsave

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="六-redis事务" tabindex="-1"><a class="header-anchor" href="#六-redis事务" aria-hidden="true">#</a> 六：Redis事务</h1><blockquote><p>Redis中的事务跟mysql不一样，mysql可以保证acid 但是redis的事务在运行时异常不能保证原子性，只能在编译时异常保证原子性</p></blockquote><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>mutli <span class="token comment">#开启事务</span>
<span class="token builtin class-name">exec</span> <span class="token comment">#提交事务</span>
discard <span class="token comment">#回滚事务</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#正常事务提交</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> multi 
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">set</span> name jack
QUEUED
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> get name
QUEUED
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">set</span> age <span class="token number">18</span>
QUEUED
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">exec</span>
<span class="token comment">#redis事务保证顺序执行、同时一起执行</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#放弃事务</span>

<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> multi
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">set</span> name sdf
QUEUED
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">set</span> age <span class="token number">12</span>
QUEUED
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> discard

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#编译时异常,回滚</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> multi 
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">set</span> name <span class="token number">123</span>
QUEUED
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> kset xx sdf
ERR unknown <span class="token builtin class-name">command</span> <span class="token variable"><span class="token variable">`</span>kset<span class="token variable">`</span></span>, with args beginning with: <span class="token variable"><span class="token variable">`</span>xx<span class="token variable">`</span></span>, <span class="token variable"><span class="token variable">`</span>sdf<span class="token variable">`</span></span>, 

<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">set</span> age <span class="token number">21</span>
QUEUED
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">exec</span>
EXECABORT Transaction discarded because of previous errors.

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#运行时异常，不回滚</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> multi
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">set</span> name jack
QUEUED
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> incr name
QUEUED
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">set</span> age <span class="token number">12</span>
QUEUED
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">exec</span>
OK
ERR value is not an integer or out of range

OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> get age
<span class="token number">12</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="/blog3/assets/image-20210915091352107.b9a3f836.png" alt="image-20210915091352107"></p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span>  <span class="token function">test6</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

        <span class="token keyword">try</span> <span class="token punctuation">{</span>

            template<span class="token punctuation">.</span><span class="token function">setEnableTransactionSupport</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            template<span class="token punctuation">.</span><span class="token function">multi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            template<span class="token punctuation">.</span><span class="token function">boundValueOps</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;rose&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


            template<span class="token punctuation">.</span><span class="token function">boundValueOps</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;88&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>




            template<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> exception<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            exception<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            template<span class="token punctuation">.</span><span class="token function">discard</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>


    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="七-jedis" tabindex="-1"><a class="header-anchor" href="#七-jedis" aria-hidden="true">#</a> 七：Jedis</h1><h2 id="pom依赖" tabindex="-1"><a class="header-anchor" href="#pom依赖" aria-hidden="true">#</a> pom依赖</h2><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>redis.clients<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jedis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="java代码" tabindex="-1"><a class="header-anchor" href="#java代码" aria-hidden="true">#</a> java代码</h2><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> testRedis <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

        <span class="token class-name">Jedis</span> jedis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Jedis</span><span class="token punctuation">(</span><span class="token string">&quot;192.168.234.122&quot;</span><span class="token punctuation">,</span> <span class="token number">6379</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        jedis<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;jack&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>jedis<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        jedis<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

 <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> testJedispwd <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

        <span class="token class-name">Jedis</span> jedis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Jedis</span><span class="token punctuation">(</span><span class="token string">&quot;192.168.234.131&quot;</span><span class="token punctuation">,</span><span class="token number">6379</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        jedis<span class="token punctuation">.</span><span class="token function">auth</span><span class="token punctuation">(</span><span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        jedis<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;jack&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> name <span class="token operator">=</span> jedis<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        jedis<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testJedisPool</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">JedisPoolConfig</span> config <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JedisPoolConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//最大空闲连接数, 默认8个</span>
        config<span class="token punctuation">.</span><span class="token function">setMaxIdle</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//最大连接数, 默认8个</span>
        config<span class="token punctuation">.</span><span class="token function">setMaxTotal</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">JedisPool</span> jedisPool <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JedisPool</span><span class="token punctuation">(</span>config<span class="token punctuation">,</span><span class="token string">&quot;192.168.234.122&quot;</span><span class="token punctuation">,</span> <span class="token number">6379</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Jedis</span> jedis <span class="token operator">=</span> jedisPool<span class="token punctuation">.</span><span class="token function">getResource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        jedis<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;rose&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>jedis<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        jedis<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        jedisPool<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>查看防火墙状态：firewall-cmd --state</p><p>关闭防火墙：systemctl stop firewalld</p><p>查看redis是否启动：netstat-anp|grep redis</p><p>查看tcp端口：netstat -nltp //--（ 全局搜索带redis的find / -name redis*）</p><p>强制关闭 pkill -9 redis</p><p>客户端连上 shutdown</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>注意：

<span class="token number">1</span>：修改bind

<span class="token builtin class-name">bind</span> ip错误理解：不是说bind哪个ip ，就只能哪个ip来访问redis

<span class="token builtin class-name">bind</span> ip正确理解： bind本机的网卡对应的ip地址，只有通过指定网卡进来的主机才能访问redis

<span class="token builtin class-name">bind</span> <span class="token number">127.0</span>.0.1（默认），本地回环地址。那么访问redis服务只能通过本机的客户端连接，而无法通过远程连接

<span class="token builtin class-name">bind</span> <span class="token number">192.168</span>.234.131  通过本机ens33网卡进来的主机都可以访问redis，这样设置后基本所有的主机都可以访问

如果要限制只允许某些host访问，那么可以通过配置安全组实现



</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>jedis常见api</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>字符串
<span class="token comment">// 1.string</span>
<span class="token comment">//输出结果: OK</span>
jedis<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;world&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//输出结果: world</span>
jedis<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//输出结果:1</span>
jedis<span class="token punctuation">.</span><span class="token function">incr</span><span class="token punctuation">(</span><span class="token string">&quot;counter&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
哈希
<span class="token comment">// 2.hash</span>
jedis<span class="token punctuation">.</span><span class="token function">hset</span><span class="token punctuation">(</span><span class="token string">&quot;myhash&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;f1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;v1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
jedis<span class="token punctuation">.</span><span class="token function">hset</span><span class="token punctuation">(</span><span class="token string">&quot;myhash&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;f2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;v2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//输出结果 : {f1=v1, f2=v2}</span>
jedis<span class="token punctuation">.</span><span class="token function">hgetAll</span><span class="token punctuation">(</span><span class="token string">&quot;myhash&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
列表
<span class="token comment">// 3.list</span>
jedis<span class="token punctuation">.</span><span class="token function">rpush</span><span class="token punctuation">(</span><span class="token string">&quot;mylist&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
jedis<span class="token punctuation">.</span><span class="token function">rpush</span><span class="token punctuation">(</span><span class="token string">&quot;mylist&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
jedis<span class="token punctuation">.</span><span class="token function">rpush</span><span class="token punctuation">(</span><span class="token string">&quot; mylist&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//输出结果 : [1, 2, 3]</span>
jedis<span class="token punctuation">.</span><span class="token function">lrange</span><span class="token punctuation">(</span><span class="token string">&quot;mylist&quot;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
集合
<span class="token comment">// 4.set</span>
jedis<span class="token punctuation">.</span><span class="token function">sadd</span><span class="token punctuation">(</span><span class="token string">&quot; myset&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
jedis<span class="token punctuation">.</span><span class="token function">sadd</span><span class="token punctuation">(</span><span class="token string">&quot; myset&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
jedis<span class="token punctuation">.</span><span class="token function">sadd</span><span class="token punctuation">(</span><span class="token string">&quot; myset&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//输出结果 : [b, a]</span>
jedis<span class="token punctuation">.</span><span class="token function">smembers</span><span class="token punctuation">(</span><span class="token string">&quot;myset&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
有序集合
<span class="token comment">// 5.zset</span>
jedis<span class="token punctuation">.</span><span class="token function">zadd</span><span class="token punctuation">(</span><span class="token string">&quot;myzset&quot;</span><span class="token punctuation">,</span> <span class="token number">99</span><span class="token punctuation">,</span> <span class="token string">&quot;tom&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
jedis<span class="token punctuation">.</span><span class="token function">zadd</span><span class="token punctuation">(</span><span class="token string">&quot;myzset&quot;</span><span class="token punctuation">,</span> <span class="token number">66</span><span class="token punctuation">,</span> <span class="token string">&quot;peter&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
jedis<span class="token punctuation">.</span><span class="token function">zadd</span><span class="token punctuation">(</span><span class="token string">&quot;myzset&quot;</span><span class="token punctuation">,</span> <span class="token number">33</span><span class="token punctuation">,</span> <span class="token string">&quot;james&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//输出结果 : [[[&quot;james&quot;],33.0], [[&quot;peter&quot;],66.0], [[&quot;tom&quot;],99.0]]</span>
jedis<span class="token punctuation">.</span><span class="token function">zrangeWithScores</span><span class="token punctuation">(</span><span class="token string">&quot;myzset&quot;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="八-spring-data-redis" tabindex="-1"><a class="header-anchor" href="#八-spring-data-redis" aria-hidden="true">#</a> 八：Spring-data-redis</h1><blockquote><p>官网：https://spring.io/projects/spring-data-redis</p></blockquote><h2 id="_8-1-基于springboot" tabindex="-1"><a class="header-anchor" href="#_8-1-基于springboot" aria-hidden="true">#</a> 8.1：基于springboot</h2><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-parent<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.3.2.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>relativePath</span><span class="token punctuation">/&gt;</span></span> <span class="token comment">&lt;!-- lookup parent from repository --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span>


<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-data-redis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- https://mvnrepository.com/artifact/org.apache.commons/commons-pool2 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.commons<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>commons-pool2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.8.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-properties ext-properties line-numbers-mode"><pre class="language-properties"><code><span class="token comment">#redis的连接信息</span>
<span class="token key attr-name">spring</span><span class="token punctuation">:</span>
<span class="token key attr-name">  redis</span><span class="token punctuation">:</span>
<span class="token key attr-name">    host</span><span class="token punctuation">:</span> <span class="token value attr-value">192.168.234.110</span>
<span class="token key attr-name">    port</span><span class="token punctuation">:</span> <span class="token value attr-value">6379</span>
<span class="token key attr-name">    password</span><span class="token punctuation">:</span> <span class="token value attr-value">123456</span>
<span class="token comment">#redis连接池的配置信息</span>
<span class="token key attr-name">    lettuce</span><span class="token punctuation">:</span>
<span class="token key attr-name">      pool</span><span class="token punctuation">:</span>
<span class="token key attr-name">        max-active</span><span class="token punctuation">:</span> <span class="token value attr-value">8</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_8-2-基于xml配置" tabindex="-1"><a class="header-anchor" href="#_8-2-基于xml配置" aria-hidden="true">#</a> 8.2：基于xml配置</h2><p>pom依赖：</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>redis.clients<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jedis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.3.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!--   Spring Data Redis 2.x binaries require JDK level 8.0 and above and Spring Framework 5.3.7 and above.     --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.data<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-data-redis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.4.10<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>5.3.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>配置文件redis.properties</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code>#最大活动对象数
redis.pool.maxTotal=1000
#最大能够保持idel状态的对象数
redis.pool.maxIdle=100
#最小能够保持idel状态的对象数
redis.pool.minIdle=50
#当池内没有返回对象时，最大等待时间
redis.pool.maxWaitMillis=10000
#当调用borrow Object方法时，是否进行有效性检查
redis.pool.testOnBorrow=true
#当调用return Object方法时，是否进行有效性检查
redis.pool.testOnReturn=true
#“空闲链接”检测线程，检测的周期，毫秒数。如果为负值，表示不运行“检测线程”。默认为-1.
redis.pool.timeBetweenEvictionRunsMillis=30000
#向调用者输出“链接”对象时，是否检测它的空闲超时；
redis.pool.testWhileIdle=true
# 对于“空闲链接”检测线程而言，每次检测的链接资源的个数。默认为3.
redis.pool.numTestsPerEvictionRun=50
#redis服务器的IP
redis.host=192.168.234.131
#redis服务器的Port
redis.port=6379
redis.timeout =5000
redis.pass=123456
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>applicationContext-jedis.xml</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>context</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/context<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>p</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/p<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans.xsd
       http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!--加载properties文件--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>property-placeholder</span> <span class="token attr-name">location</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>classpath:redis.properties<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>

<span class="token comment">&lt;!--    Redis连接池的配置--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jedisPoolConfig<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>redis.clients.jedis.JedisPoolConfig<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>maxIdle<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${redis.pool.maxIdle}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>maxTotal<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${redis.pool.maxTotal}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- 配置 Reids连接工厂--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>connectionFactory<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.data.redis.connection.jedis.JedisConnectionFactory<span class="token punctuation">&quot;</span></span>
<span class="token attr-name"><span class="token namespace">p:</span>hostName</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${redis.host}<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">p:</span>port</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${redis.port}<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">p:</span>poolConfig-ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jedisPoolConfig<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!--    配置redis操作模板组件--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.data.redis.core.StringRedisTemplate<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>connectionFactory<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>connectionFactory<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>测试</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>qf</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span></span><span class="token class-name">Test</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>runner<span class="token punctuation">.</span></span><span class="token class-name">RunWith</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>data<span class="token punctuation">.</span>redis<span class="token punctuation">.</span>core<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>test<span class="token punctuation">.</span>context<span class="token punctuation">.</span></span><span class="token class-name">ContextConfiguration</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>test<span class="token punctuation">.</span>context<span class="token punctuation">.</span>junit4<span class="token punctuation">.</span></span><span class="token class-name">SpringJUnit4ClassRunner</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Set</span></span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>title: com.qf<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
 * <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Company: wendao<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
 * author zhuximing
 * date 2021/6/24
 * description:
 */</span>
<span class="token annotation punctuation">@RunWith</span><span class="token punctuation">(</span><span class="token class-name">SpringJUnit4ClassRunner</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ContextConfiguration</span><span class="token punctuation">(</span>locations <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;classpath:app-redis.xml&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RedisTest</span> <span class="token punctuation">{</span>


    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">StringRedisTemplate</span> stringRedisTemplate<span class="token punctuation">;</span>
    
    
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span>  <span class="token function">testString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

        stringRedisTemplate<span class="token punctuation">.</span><span class="token function">boundValueOps</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;lisi&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">String</span> name <span class="token operator">=</span> stringRedisTemplate<span class="token punctuation">.</span><span class="token function">boundValueOps</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>
    
    
    
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span>  <span class="token function">testList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//存</span>
        <span class="token class-name">BoundListOperations</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> operations <span class="token operator">=</span> stringRedisTemplate<span class="token punctuation">.</span><span class="token function">boundListOps</span><span class="token punctuation">(</span><span class="token string">&quot;names&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        operations<span class="token punctuation">.</span><span class="token function">rightPush</span><span class="token punctuation">(</span><span class="token string">&quot;张飞&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        operations<span class="token punctuation">.</span><span class="token function">rightPush</span><span class="token punctuation">(</span><span class="token string">&quot;关羽&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//取</span>

        <span class="token class-name">String</span> s <span class="token operator">=</span> operations<span class="token punctuation">.</span><span class="token function">rightPop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>


    <span class="token punctuation">}</span>
    
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span>  <span class="token function">testHash</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">BoundHashOperations</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> operations <span class="token operator">=</span> stringRedisTemplate<span class="token punctuation">.</span><span class="token function">boundHashOps</span><span class="token punctuation">(</span><span class="token string">&quot;person&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//存</span>
        operations<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;jack&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        operations<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;18&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


        <span class="token comment">//取</span>
        <span class="token class-name">Object</span> name <span class="token operator">=</span> operations<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>


        <span class="token comment">//取所有的value</span>
        <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> keys <span class="token operator">=</span> operations<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> values <span class="token operator">=</span> operations<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        values<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>


    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span>  <span class="token function">testSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">BoundSetOperations</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> operations <span class="token operator">=</span> stringRedisTemplate<span class="token punctuation">.</span><span class="token function">boundSetOps</span><span class="token punctuation">(</span><span class="token string">&quot;ips&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//存</span>
        operations<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;110&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;110&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;111&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;112&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


        <span class="token comment">//取</span>
        <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> members <span class="token operator">=</span> operations<span class="token punctuation">.</span><span class="token function">members</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        members<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


        <span class="token comment">//判断元素是否存在</span>
        <span class="token class-name">Boolean</span> member <span class="token operator">=</span> operations<span class="token punctuation">.</span><span class="token function">isMember</span><span class="token punctuation">(</span><span class="token string">&quot;110&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>member<span class="token punctuation">)</span><span class="token punctuation">;</span>


    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span>  <span class="token function">testZset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">BoundZSetOperations</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> operations <span class="token operator">=</span> stringRedisTemplate<span class="token punctuation">.</span><span class="token function">boundZSetOps</span><span class="token punctuation">(</span><span class="token string">&quot;pro&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//存</span>
        operations<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;华为&quot;</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        operations<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;小米&quot;</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        operations<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;iphone&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


        <span class="token comment">//取</span>
        <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> range <span class="token operator">=</span> operations<span class="token punctuation">.</span><span class="token function">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        range<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


        <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> strings <span class="token operator">=</span> operations<span class="token punctuation">.</span><span class="token function">reverseRange</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        strings<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


        <span class="token comment">//显示分数信息</span>
        <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ZSetOperations<span class="token punctuation">.</span>TypedTuple</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> typedTuples <span class="token operator">=</span> operations<span class="token punctuation">.</span><span class="token function">rangeWithScores</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">ZSetOperations<span class="token punctuation">.</span>TypedTuple</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> typedTuple <span class="token operator">:</span> typedTuples<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">String</span> value <span class="token operator">=</span> typedTuple<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">Double</span> score <span class="token operator">=</span> typedTuple<span class="token punctuation">.</span><span class="token function">getScore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>score<span class="token operator">+</span><span class="token string">&quot; --&quot;</span><span class="token operator">+</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>
    
    
    
     <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span>  <span class="token function">test6</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            template<span class="token punctuation">.</span><span class="token function">setEnableTransactionSupport</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            template<span class="token punctuation">.</span><span class="token function">multi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            template<span class="token punctuation">.</span><span class="token function">boundValueOps</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;rose&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            template<span class="token punctuation">.</span><span class="token function">boundValueOps</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;88&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            template<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> exception<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            exception<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            template<span class="token punctuation">.</span><span class="token function">discard</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>


    <span class="token punctuation">}</span>
    
    
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="九-redis应用" tabindex="-1"><a class="header-anchor" href="#九-redis应用" aria-hidden="true">#</a> 九：Redis应用</h1><h2 id="_9-1-短信验证码" tabindex="-1"><a class="header-anchor" href="#_9-1-短信验证码" aria-hidden="true">#</a> 9.1：短信验证码</h2><blockquote><p>用Redis存放短信验证码</p><p>why not session？</p></blockquote><h3 id="vscode" tabindex="-1"><a class="header-anchor" href="#vscode" aria-hidden="true">#</a> vscode</h3><p><img src="/blog3/assets/image-20210913171424253.95e5bde0.png" alt="image-20210913171424253"></p><p><img src="/blog3/assets/image-20210914094035486.ea7319d6.png" alt="image-20210914094035486"></p><h3 id="阿里大于" tabindex="-1"><a class="header-anchor" href="#阿里大于" aria-hidden="true">#</a> 阿里大于</h3><p>第一步：创建应用获取appkey和seckey</p><p><img src="/blog3/assets/image-20210624113201889.910d71bc.png" alt="image-20210624113201889"></p><p>第二步：新建签名</p><p><img src="/blog3/assets/image-20210624113243177.3156f951.png" alt="image-20210624113243177"></p><p>第三步：添加短信模板</p><p><img src="/blog3/assets/image-20210624113606207.b4bae06b.png" alt="image-20210624113606207"></p><p>第四步：发送短信</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">TaobaoClient</span> client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DefaultTaobaoClient</span><span class="token punctuation">(</span><span class="token string">&quot;http://gw.api.taobao.com/router/rest&quot;</span><span class="token punctuation">,</span>
                                              <span class="token string">&quot;23473071&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;951efdcc9540d2c0c1646ed6d74892e6&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">AlibabaAliqinFcSmsNumSendRequest</span> req <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AlibabaAliqinFcSmsNumSendRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
req<span class="token punctuation">.</span><span class="token function">setExtend</span><span class="token punctuation">(</span><span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
req<span class="token punctuation">.</span><span class="token function">setSmsType</span><span class="token punctuation">(</span><span class="token string">&quot;normal&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
req<span class="token punctuation">.</span><span class="token function">setSmsFreeSignName</span><span class="token punctuation">(</span><span class="token string">&quot;问道学院&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//随机生成验证码</span>
<span class="token class-name">String</span> code <span class="token operator">=</span> <span class="token class-name">RandomUtil</span><span class="token punctuation">.</span><span class="token function">randomNumbers</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

req<span class="token punctuation">.</span><span class="token function">setSmsParamString</span><span class="token punctuation">(</span><span class="token string">&quot;{\&quot;code\&quot;:\&quot;&quot;</span><span class="token operator">+</span>code<span class="token operator">+</span><span class="token string">&quot;\&quot;}&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
req<span class="token punctuation">.</span><span class="token function">setRecNum</span><span class="token punctuation">(</span><span class="token string">&quot;13147132961&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
req<span class="token punctuation">.</span><span class="token function">setSmsTemplateCode</span><span class="token punctuation">(</span><span class="token string">&quot;SMS_209190607&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">AlibabaAliqinFcSmsNumSendResponse</span> rsp <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>req<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>rsp<span class="token punctuation">.</span><span class="token function">getBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>生成验证码工具类</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">String</span> s <span class="token operator">=</span> <span class="token class-name">RandomUtil</span><span class="token punctuation">.</span><span class="token function">randomNumbers</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>阿里大于：jar包</strong></p><blockquote><p>上传阿里大于jar包到本地仓库</p></blockquote><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>mvn install:install-file <span class="token parameter variable">-Dfile</span><span class="token operator">=</span>taobao-sdk-java-auto_1455552377940-20160607.jar <span class="token parameter variable">-DgroupId</span><span class="token operator">=</span>com.alimama <span class="token parameter variable">-DartifactId</span><span class="token operator">=</span>sms <span class="token parameter variable">-Dversion</span><span class="token operator">=</span><span class="token number">1.0</span> <span class="token parameter variable">-Dpackaging</span><span class="token operator">=</span>jar 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>糊涂工具官网：https://www.hutool.cn/docs/#/</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>cn.hutool<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>hutool-all<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>5.7.12<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="功能一-短信发送" tabindex="-1"><a class="header-anchor" href="#功能一-短信发送" aria-hidden="true">#</a> 功能一：短信发送</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>qf<span class="token punctuation">.</span>utils</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">cn<span class="token punctuation">.</span>hutool<span class="token punctuation">.</span>core<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">RandomUtil</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>taobao<span class="token punctuation">.</span>api<span class="token punctuation">.</span></span><span class="token class-name">ApiException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>taobao<span class="token punctuation">.</span>api<span class="token punctuation">.</span></span><span class="token class-name">DefaultTaobaoClient</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>taobao<span class="token punctuation">.</span>api<span class="token punctuation">.</span></span><span class="token class-name">TaobaoClient</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>taobao<span class="token punctuation">.</span>api<span class="token punctuation">.</span>request<span class="token punctuation">.</span></span><span class="token class-name">AlibabaAliqinFcSmsNumSendRequest</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>taobao<span class="token punctuation">.</span>api<span class="token punctuation">.</span>response<span class="token punctuation">.</span></span><span class="token class-name">AlibabaAliqinFcSmsNumSendResponse</span></span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>title: com.qf.utils<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
 * <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Company: wendao<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
 * author zhuximing
 * date 2021/9/13
 * description:
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SmsUtil</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span>   <span class="token keyword">final</span> <span class="token class-name">String</span> url <span class="token operator">=</span> <span class="token string">&quot;http://gw.api.taobao.com/router/rest&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span>   <span class="token keyword">final</span> <span class="token class-name">String</span> appkey <span class="token operator">=</span> <span class="token string">&quot;23473071&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span>  <span class="token keyword">static</span>   <span class="token keyword">final</span> <span class="token class-name">String</span> secret <span class="token operator">=</span><span class="token string">&quot;951efdcc9540d2c0c1646ed6d74892e6&quot;</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">boolean</span>  <span class="token function">sendMSG</span><span class="token punctuation">(</span><span class="token class-name">String</span> code<span class="token punctuation">,</span><span class="token class-name">String</span> phone<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">TaobaoClient</span> client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DefaultTaobaoClient</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> appkey<span class="token punctuation">,</span> secret<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">AlibabaAliqinFcSmsNumSendRequest</span> req <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AlibabaAliqinFcSmsNumSendRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            req<span class="token punctuation">.</span><span class="token function">setExtend</span><span class="token punctuation">(</span><span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            req<span class="token punctuation">.</span><span class="token function">setSmsType</span><span class="token punctuation">(</span><span class="token string">&quot;normal&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            req<span class="token punctuation">.</span><span class="token function">setSmsFreeSignName</span><span class="token punctuation">(</span><span class="token string">&quot;问道学院&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            req<span class="token punctuation">.</span><span class="token function">setSmsParamString</span><span class="token punctuation">(</span><span class="token string">&quot;{\&quot;code\&quot;:\&quot;&quot;</span><span class="token operator">+</span>code<span class="token operator">+</span><span class="token string">&quot;\&quot;}&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            req<span class="token punctuation">.</span><span class="token function">setRecNum</span><span class="token punctuation">(</span>phone<span class="token punctuation">)</span><span class="token punctuation">;</span>
            req<span class="token punctuation">.</span><span class="token function">setSmsTemplateCode</span><span class="token punctuation">(</span><span class="token string">&quot;SMS_209190607&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">AlibabaAliqinFcSmsNumSendResponse</span> rsp <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>req<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>rsp<span class="token punctuation">.</span><span class="token function">getBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">return</span>  <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ApiException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">return</span>  <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>


    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>业务代码</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>miletao<span class="token punctuation">.</span>service<span class="token punctuation">.</span>impl</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">cn<span class="token punctuation">.</span>hutool<span class="token punctuation">.</span>core<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">RandomUtil</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>miletao<span class="token punctuation">.</span>service<span class="token punctuation">.</span></span><span class="token class-name">ISMSService</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>miletao<span class="token punctuation">.</span>vo<span class="token punctuation">.</span></span><span class="token class-name">ResultVO</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>qf<span class="token punctuation">.</span>sms<span class="token punctuation">.</span></span><span class="token class-name">SMSUtil</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>data<span class="token punctuation">.</span>redis<span class="token punctuation">.</span>core<span class="token punctuation">.</span></span><span class="token class-name">StringRedisTemplate</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Service</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">StringUtils</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">TimeUnit</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>regex<span class="token punctuation">.</span></span><span class="token class-name">Pattern</span></span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>title: com.miletao.service.impl<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
 * <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Company: wendao<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
 * author zhuximing
 * date 2021/6/24
 * description:
 */</span>
<span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SMSService</span> <span class="token keyword">implements</span> <span class="token class-name">ISMSService</span> <span class="token punctuation">{</span>


    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">StringRedisTemplate</span> redisTemplate<span class="token punctuation">;</span>


    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">ResultVO</span> <span class="token function">sendSms</span><span class="token punctuation">(</span><span class="token class-name">String</span> phone<span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token keyword">try</span> <span class="token punctuation">{</span>
           <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>phone<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
               <span class="token keyword">return</span>  <span class="token keyword">new</span> <span class="token class-name">ResultVO</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token string">&quot;手机号不能为空&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token punctuation">}</span>

           <span class="token comment">//校验手机号是否合法</span>
           <span class="token keyword">boolean</span> matches <span class="token operator">=</span> <span class="token class-name">Pattern</span><span class="token punctuation">.</span><span class="token function">matches</span><span class="token punctuation">(</span><span class="token string">&quot;^1[3-9]\\d{9}$&quot;</span><span class="token punctuation">,</span> phone<span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>matches<span class="token punctuation">)</span> <span class="token punctuation">{</span>
               <span class="token keyword">return</span>  <span class="token keyword">new</span> <span class="token class-name">ResultVO</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token string">&quot;手机号不合法&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token punctuation">}</span>


           <span class="token comment">//发送验证码【阿里大于】</span>
           <span class="token class-name">String</span> code <span class="token operator">=</span> <span class="token class-name">RandomUtil</span><span class="token punctuation">.</span><span class="token function">randomNumbers</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token class-name">ResultVO</span> resultVO <span class="token operator">=</span> <span class="token class-name">SMSUtil</span><span class="token punctuation">.</span><span class="token function">sendSMS</span><span class="token punctuation">(</span>phone<span class="token punctuation">,</span> code<span class="token punctuation">)</span><span class="token punctuation">;</span>

           <span class="token comment">//验证码存储到Redis</span>
           redisTemplate<span class="token punctuation">.</span><span class="token function">boundValueOps</span><span class="token punctuation">(</span><span class="token string">&quot;sms:&quot;</span><span class="token operator">+</span>phone<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span><span class="token punctuation">;</span>
           redisTemplate<span class="token punctuation">.</span><span class="token function">expire</span><span class="token punctuation">(</span><span class="token string">&quot;sms:&quot;</span><span class="token operator">+</span>phone<span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">MINUTES</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

           <span class="token keyword">return</span>  <span class="token keyword">new</span> <span class="token class-name">ResultVO</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token string">&quot;success&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

       <span class="token punctuation">}</span><span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> exception<span class="token punctuation">)</span><span class="token punctuation">{</span>
            exception<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">return</span>  <span class="token keyword">new</span> <span class="token class-name">ResultVO</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token string">&quot;短信发送失败&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span>



    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="功能二-验证短信" tabindex="-1"><a class="header-anchor" href="#功能二-验证短信" aria-hidden="true">#</a> 功能二：验证短信</h3><p>业务代码</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code> <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">ResultVO</span> <span class="token function">login</span><span class="token punctuation">(</span><span class="token class-name">String</span> phone<span class="token punctuation">,</span> <span class="token class-name">String</span> code<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>phone<span class="token punctuation">)</span><span class="token operator">||</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span>  <span class="token keyword">new</span> <span class="token class-name">ResultVO</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token string">&quot;fail&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>


        <span class="token class-name">String</span> redisCode <span class="token operator">=</span> redisTemplate<span class="token punctuation">.</span><span class="token function">boundValueOps</span><span class="token punctuation">(</span><span class="token string">&quot;sms:&quot;</span> <span class="token operator">+</span> phone<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>redisCode<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span>  <span class="token keyword">new</span> <span class="token class-name">ResultVO</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token string">&quot;fail&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>redisCode<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span>  <span class="token keyword">new</span> <span class="token class-name">ResultVO</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token string">&quot;验证码输入错误&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>


        <span class="token comment">//判断phone在数据库中是否存在</span>
        <span class="token class-name">TbUser</span> userByUserName <span class="token operator">=</span> userMapper<span class="token punctuation">.</span><span class="token function">findUserByUserName</span><span class="token punctuation">(</span>phone<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>userByUserName <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//注册</span>
            <span class="token keyword">int</span> i <span class="token operator">=</span> userMapper<span class="token punctuation">.</span><span class="token function">saveUser</span><span class="token punctuation">(</span>phone<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">TbUser</span> tbUser <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TbUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//获取</span>
            <span class="token class-name">TbUser</span> userByUserName1 <span class="token operator">=</span> userMapper<span class="token punctuation">.</span><span class="token function">findUserByUserName</span><span class="token punctuation">(</span>phone<span class="token punctuation">)</span><span class="token punctuation">;</span>

            redisTemplate<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token string">&quot;sms:&quot;</span><span class="token operator">+</span>phone<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">return</span>  <span class="token keyword">new</span> <span class="token class-name">ResultVO</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token string">&quot;success&quot;</span><span class="token punctuation">,</span>userByUserName1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>

            redisTemplate<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token string">&quot;sms:&quot;</span><span class="token operator">+</span>phone<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span>  <span class="token keyword">new</span> <span class="token class-name">ResultVO</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token string">&quot;success&quot;</span><span class="token punctuation">,</span>userByUserName<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>模拟：1生成 随机生成4个数字，key为手机号,数字为val值，放在redis 中，设置超时时间2分钟</p><p>​ 2 做一个简易的页面，输入手机号，验证码，后台比对输入的验证和redis中的存储数据</p><p>​ 3 一样登录，不一样登录失败</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>hutoo工具包使用：
&lt;dependency&gt;
    &lt;groupId&gt;cn.hutool&lt;/groupId&gt;
    &lt;artifactId&gt;hutool-all&lt;/artifactId&gt;
    &lt;version&gt;5.7.19&lt;/version&gt;
&lt;/dependency&gt;
如需使用thymeleaf，则可以引入： 
    &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;
      &lt;/dependency&gt;

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_9-2-redis查询缓存" tabindex="-1"><a class="header-anchor" href="#_9-2-redis查询缓存" aria-hidden="true">#</a> 9.2：Redis查询缓存</h2><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code> <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TbCategory</span><span class="token punctuation">&gt;</span></span> <span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token doc-comment comment">/**
         * string
         * k=&gt; index:category
         * v=&gt; json串（分类列表）
         */</span>
        <span class="token comment">//get from redis</span>
        <span class="token class-name">BoundValueOperations</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> operations <span class="token operator">=</span> redisTemplate<span class="token punctuation">.</span><span class="token function">boundValueOps</span><span class="token punctuation">(</span><span class="token string">&quot;index:category&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> catListJsonStr <span class="token operator">=</span> operations<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>catListJsonStr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;get from db&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//get from db</span>
            <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TbCategory</span><span class="token punctuation">&gt;</span></span> categories <span class="token operator">=</span> categoryMapper<span class="token punctuation">.</span><span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> jsonStr <span class="token operator">=</span> <span class="token class-name">JSONUtil</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>categories<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toStringPretty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">//cache to redis</span>
            operations<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>jsonStr<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">return</span> categories<span class="token punctuation">;</span>

        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>

            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;get from redis&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//json串=&gt;对象</span>
            <span class="token class-name">List</span> list <span class="token operator">=</span> <span class="token class-name">JSONUtil</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span>catListJsonStr<span class="token punctuation">,</span> <span class="token class-name">TbCategory</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> list<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>


    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>查询缓存： 数据字典表</p><p>电商项目</p><p>金额单位：元 /万元</p><p>衣服数量量级：件 /套</p><p>鞋子: 只/双</p><p>以字典表为例： 1先从redis缓存中查询是否有所有字典表数据</p><p>​ 2 如果有，直接返回到前端，不到数据库中查</p><p>​ 3 如果没有，查询db，返回到前端，并放到redis中</p><h1 id="_10-redis持久化" tabindex="-1"><a class="header-anchor" href="#_10-redis持久化" aria-hidden="true">#</a> 10：Redis持久化</h1><div class="language-txt ext-txt line-numbers-mode"><pre class="language-txt"><code>为什么要持久化
Redis是基于内存存储数据的，如果Redis服务器宕机，数据就丢失了

持久化：将内存中的数据不定期备份到磁盘中

数据恢复：将磁盘中的数据 加载（恢复）到内存中

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-txt ext-txt line-numbers-mode"><pre class="language-txt"><code>Redis持久化方案2种
RDB(Redis Databases):内存中的数据集快照写入磁盘，也就是 Snapshot 快照,恢复时是将快照文件直接读到内存里。
AOF(Append Of File):以日志的形式记录每个写操作，当redis重启时，加载aof文件，将修改命令执行一遍。
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_10-1-rdb" tabindex="-1"><a class="header-anchor" href="#_10-1-rdb" aria-hidden="true">#</a> 10.1：RDB</h2><h3 id="rdb持久化方案的特点" tabindex="-1"><a class="header-anchor" href="#rdb持久化方案的特点" aria-hidden="true">#</a> RDB持久化方案的特点</h3><blockquote><p>Redis会单独fork一个子进程进行持久化工作，该子进程先将数据写入一个临时文件，等待持久化完毕，再将临时文件覆盖替换上此持久化好的文件，整个过程主进程是不会进行任何的IO操作，确保了极高的性能，而且当进行大规模数据恢复的时候RDB性能也非常高. 但是RDB有缺点，没法保证数据不丢失</p><p>Redis默认的持久化方案就是rdb</p></blockquote><p><img src="/blog3/assets/image-20210110183002483-1610290031516.29e914a1.png" alt="image-20210110183002483"></p><h3 id="rdb相关配置" tabindex="-1"><a class="header-anchor" href="#rdb相关配置" aria-hidden="true">#</a> rdb相关配置</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#可以通过该配置修改文件名</span>
dbfilename dump.rdb 
<span class="token comment">#指定rdb文件存储的路劲</span>
<span class="token function">dir</span> 

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="触发方式" tabindex="-1"><a class="header-anchor" href="#触发方式" aria-hidden="true">#</a> 触发方式</h3><p>自动触发（满足条件）可配置</p><div class="language-txt ext-txt line-numbers-mode"><pre class="language-txt"><code>#配置rdb数据持久化自动触发的条件
save 900 1
save 300 10
save 60 10000     #rdb默认开启无法关闭
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>手动触发：</p><ul><li>1.正常关闭redis-server（shutdown，flushdb手动）</li><li>2.save该命令会阻塞当前Redis服务器，执行save命令期间，Redis不能处理其他命令，直到RDB过程完成为止。 　　显然该命令对于内存比较大的实例会造成长时间阻塞，这是致命的缺陷。</li><li>3.bgsave 执行该命令时，Redis会在后台异步进行快照操作，快照同时还可以响应客户端请求。具体操作是Redis进程执行fork操作创建子进程，RDB持久化过程由子进程负责，完成后自动结束。阻塞只发生在fork阶段，一般时间很短。</li></ul><p><img src="/blog3/assets/image-20210110182705846.7d7916f1.png" alt="image-20210110182705846"></p><h2 id="_10-2-aof" tabindex="-1"><a class="header-anchor" href="#_10-2-aof" aria-hidden="true">#</a> 10.2：AOF</h2><h3 id="aof持久化方案的特点" tabindex="-1"><a class="header-anchor" href="#aof持久化方案的特点" aria-hidden="true">#</a> AOF持久化方案的特点</h3><blockquote><p>将Redis所有的写操作<strong>命令</strong>记录下来（读操作不记录），以文件追加的方式存放起来，当Redis重启恢复数据时，将操作日志从头到尾执行一遍，恢复数据</p><p>aof默认是关闭的，如果要开启aof必须要配置</p><p>appendonly yes</p></blockquote><p><img src="/blog3/assets/image-20210110184533162.a1603a5c.png" alt="image-20210110184533162"></p><h3 id="aof相关配置" tabindex="-1"><a class="header-anchor" href="#aof相关配置" aria-hidden="true">#</a> AOF相关配置</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#AOF持久化方案默认是关闭，如果要开启，需要如下配置</span>
appendonly <span class="token function">yes</span>
<span class="token comment">#自定义aof日志文件名</span>
appendfilename <span class="token string">&quot;appendonly.aof&quot;</span> 
<span class="token comment">#指定aof文件存储目录</span>
<span class="token function">dir</span> 

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="触发方式-1" tabindex="-1"><a class="header-anchor" href="#触发方式-1" aria-hidden="true">#</a> 触发方式</h3><div class="language-txt ext-txt line-numbers-mode"><pre class="language-txt"><code>#aof的触发条件
appendfsync always
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="/blog3/assets/image-20210110184852778.3f1c8bd2.png" alt="image-20210110184852778"></p><h3 id="aof重写" tabindex="-1"><a class="header-anchor" href="#aof重写" aria-hidden="true">#</a> AOF重写</h3><blockquote><p>由于AOF持久化是Redis不断将写命令记录到 AOF 文件中，随着Redis不断的进行，AOF 的文件会越来越大，文件越大，占用服务器内存越大以及 AOF 恢复要求时间越长。为了解决这个问题，Redis新增了重写机制，当AOF文件的大小超过所设定的阈值时，Redis就会启动AOF文件的内容压缩，只保留可以恢复数据的最小指令集。可以使用命令 bgrewriteaof 来重新。</p></blockquote><p><img src="/blog3/assets/image-20210110185044480.77046ac7.png" alt="image-20210110185044480"></p><h2 id="_10-3-rdb对比aof" tabindex="-1"><a class="header-anchor" href="#_10-3-rdb对比aof" aria-hidden="true">#</a> 10.3：RDB对比AOF</h2><p><img src="/blog3/assets/image-20210110185248622.06a11553.png" alt="image-20210110185248622"></p><div class="language-txt ext-txt line-numbers-mode"><pre class="language-txt"><code>建议
如果对数据的安全性要求比较高（Redis存储秒杀的订单数据）  必须要开启aof
如果对数据的安全性要求不高（Redis查询缓存） ，可以不开启aof

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="_11-redis集群" tabindex="-1"><a class="header-anchor" href="#_11-redis集群" aria-hidden="true">#</a> 11：Redis集群</h1><h2 id="集群配置" tabindex="-1"><a class="header-anchor" href="#集群配置" aria-hidden="true">#</a> 集群配置</h2><p><strong>主节点配置</strong></p><p>7001节点配置 :redis7001.conf</p><div class="language-txt ext-txt line-numbers-mode"><pre class="language-txt"><code>include /export/server/redis/conf/redis.conf
port 7001
pidfile /var/run/redis7001.pid
dbfilename redis7001.rdb
appendfilename &quot;appendonly7001.aof&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>7002从节点配置 :redis7002.conf</p><div class="language-txt ext-txt line-numbers-mode"><pre class="language-txt"><code>include /export/server/redis/conf/redis.conf
port 7002
pidfile /var/run/redis7002.pid
dbfilename redis7002.rdb
appendfilename &quot;appendonly7002.aof&quot;
slaveof 192.168.25.102 7001
masterauth 123456 ##挂载主redis的服务器密码

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>7003从节点配置 :redis7003.conf</p><div class="language-txt ext-txt line-numbers-mode"><pre class="language-txt"><code>include /export/server/redis/conf/redis.conf
port 7003
pidfile /var/run/redis7003.pid
dbfilename redis7003.rdb
appendfilename &quot;appendonly7003.aof&quot;
slaveof 192.168.25.102 7001
masterauth 123456
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>启动集群</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@zhuxm01 redis<span class="token punctuation">]</span><span class="token comment"># redis-server redis7001.conf </span>
<span class="token punctuation">[</span>root@zhuxm01 redis<span class="token punctuation">]</span><span class="token comment"># redis-server redis7002.conf </span>
<span class="token punctuation">[</span>root@zhuxm01 redis<span class="token punctuation">]</span><span class="token comment"># redis-server redis7003.conf </span>
<span class="token punctuation">[</span>root@zhuxm01 redis<span class="token punctuation">]</span><span class="token comment"># ps -ef|grep redis</span>
root      <span class="token number">13195</span>      <span class="token number">1</span>  <span class="token number">0</span> <span class="token number">10</span>:49 ?        00:00:00 redis-server <span class="token number">192.168</span>.234.131:7001
root      <span class="token number">13204</span>      <span class="token number">1</span>  <span class="token number">0</span> <span class="token number">10</span>:49 ?        00:00:00 redis-server <span class="token number">192.168</span>.234.131:7002
root      <span class="token number">13213</span>      <span class="token number">1</span>  <span class="token number">0</span> <span class="token number">10</span>:49 ?        00:00:00 redis-server <span class="token number">192.168</span>.234.131:7003

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="_12-哨兵模式sentinel" tabindex="-1"><a class="header-anchor" href="#_12-哨兵模式sentinel" aria-hidden="true">#</a> 12：哨兵模式sentinel</h1><h2 id="哨兵模式介绍" tabindex="-1"><a class="header-anchor" href="#哨兵模式介绍" aria-hidden="true">#</a> 哨兵模式介绍</h2><p><img src="/blog3/assets/image-20210110223536409.4cca6c5e.png" alt="image-20210110223536409"></p><div class="language-txt ext-txt line-numbers-mode"><pre class="language-txt"><code>哨兵职责：
监控(Monitoring)：Sentinel 会不断地定期检查你的主服务器和从服务器是否运作正常。

提醒(Notification): 当被监控的某个 Redis 服务器出现问题时， Sentinel 可以通过 API 向管理员或者其他应用程序发送通知。

自动故障迁移(Automaticfailover): 当主服务器不能正常工作时， Sentinel 会开始一次自动故障迁移操作，选举新主

哨兵：是整个集群的入口
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="哨兵模式配置" tabindex="-1"><a class="header-anchor" href="#哨兵模式配置" aria-hidden="true">#</a> 哨兵模式配置</h2><p>1：先启动redis集群</p><p>2：三个哨兵就新建3个分别sentinel01.conf 、sentinel02.conf、sentinel03.conf，注意区分端口</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">bind</span> <span class="token number">0.0</span>.0.0
<span class="token comment">#哨兵的端口</span>
port <span class="token number">26379</span>
<span class="token comment">#mymaster自定义</span>
sentinel monitor mymaster <span class="token number">192.168</span>.25.102 <span class="token number">7001</span> <span class="token number">1</span>
<span class="token comment">#设置redis主节点的访问密码</span>
sentinel auth-pass mymaster <span class="token number">123456</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-txt ext-txt line-numbers-mode"><pre class="language-txt"><code>bind 0.0.0.0
#哨兵的端口
port 26380
#mymaster自定义
sentinel monitor mymaster 192.168.25.101 7001 1
#设置redis主节点的访问密码
sentinel auth-pass mymaster 123456
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-txt ext-txt line-numbers-mode"><pre class="language-txt"><code>bind 0.0.0.0
#哨兵的端口
port 26381
#mymaster自定义
sentinel monitor mymaster 192.168.25.101 7001 1
#设置redis主节点的访问密码
sentinel auth-pass mymaster 123456
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3：启动哨兵</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>redis-sentinel sentinel01.conf
redis-sentinel sentinel02.conf
redis-sentinel sentinel03.conf

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>4：哨兵详细配置项</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 哨兵sentinel实例运行的端口 默认26379</span>
port <span class="token number">26379</span>

<span class="token comment">#以守护进程模式启动</span>
daemonize <span class="token function">yes</span>

<span class="token comment"># 哨兵sentinel的工作目录</span>
<span class="token function">dir</span> /tmp

<span class="token comment">#日志文件名</span>
logfile <span class="token string">&quot;sentinel_26379.log&quot;</span>

<span class="token comment"># sentinel监控的master主机</span>
sentinel monitor mymaster <span class="token number">192.168</span>.1.108 <span class="token number">6379</span> <span class="token number">2</span>

<span class="token comment"># sentinel连接主从密码验证，注意必须为主从设置一样的密码</span>
<span class="token comment"># sentinel auth-pass &lt;master-name&gt; &lt;password&gt;</span>
sentinel auth-pass mymaster <span class="token number">1234</span>

<span class="token comment"># 指定多少毫秒之后 主节点没有应答哨兵sentinel 此时 哨兵主观上认为主节点下线 默认30秒</span>
sentinel down-after-milliseconds mymaster <span class="token number">5000</span>


<span class="token comment">#在发生failover主备切换时，这个选项指定了最多可以有多少个slave同时对新的master进行同步数据。这个数字越小，完成failover所需的时间就越长，但是如果这个数字越大，就意味着越多的slave因为replication而不可用。可以设为 1 来保证每次只有一个slave处于不能处理命令请求的状态</span>
sentinel parallel-syncs mymaster <span class="token number">1</span>

<span class="token comment"># 失效转移最大时间设置</span>
sentinel failover-timeout mymaster <span class="token number">180000</span>

<span class="token comment">#如果了这个脚本路径，那么必须保证这个脚本存在于这个路径，并且是可执行的，否则sentinel无法正常启动成功。</span>

sentinel notification-script mymaster /var/redis/notify.sh  
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="/blog3/assets/image-20210111143629643.e776d791.png" alt="image-20210111143629643"></p><h3 id="基于springboot" tabindex="-1"><a class="header-anchor" href="#基于springboot" aria-hidden="true">#</a> 基于springboot</h3><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">redis</span><span class="token punctuation">:</span>
    <span class="token key atrule">sentinel</span><span class="token punctuation">:</span>
      <span class="token key atrule">master</span><span class="token punctuation">:</span> mymaster
      <span class="token key atrule">nodes</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> 192.168.234.110<span class="token punctuation">:</span><span class="token number">26379</span>
        <span class="token punctuation">-</span> 192.168.234.110<span class="token punctuation">:</span><span class="token number">26380</span>
        <span class="token punctuation">-</span> 192.168.234.110<span class="token punctuation">:</span><span class="token number">26381</span>
    <span class="token key atrule">password</span><span class="token punctuation">:</span> <span class="token number">123456</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="基于xml配置" tabindex="-1"><a class="header-anchor" href="#基于xml配置" aria-hidden="true">#</a> 基于xml配置</h3><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>context</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/context<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>p</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/p<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans.xsd
       http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>property-placeholder</span> <span class="token attr-name">location</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>classpath:redis.properties<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ignore-unresolvable</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>


    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pool<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>redis.clients.jedis.JedisPoolConfig<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>maxTotal<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${redis.pool.maxTotal}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>maxIdle<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${redis.pool.maxIdle}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>redisSentinelConfiguration<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.data.redis.connection.RedisSentinelConfiguration<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>master<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.data.redis.connection.RedisNode<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mymaster<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sentinels<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>set</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.data.redis.connection.RedisNode<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>host<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>192.168.25.101<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>port<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>26379<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
                 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.data.redis.connection.RedisNode<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>host<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>192.168.25.101<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>port<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>26380<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
                 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.data.redis.connection.RedisNode<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>host<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>192.168.25.101<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>port<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>26381<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>set</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jedisConnectionFactory<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.data.redis.connection.jedis.JedisConnectionFactory<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">p:</span>password</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>123456<span class="token punctuation">&quot;</span></span> <span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sentinelConfig<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>redisSentinelConfiguration<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>poolConfig<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pool<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stringRedisTemplate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.data.redis.core.StringRedisTemplate<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>connectionFactory<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jedisConnectionFactory<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>



<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>qf</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span></span><span class="token class-name">Test</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>runner<span class="token punctuation">.</span></span><span class="token class-name">RunWith</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>data<span class="token punctuation">.</span>redis<span class="token punctuation">.</span>core<span class="token punctuation">.</span></span><span class="token class-name">StringRedisTemplate</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>test<span class="token punctuation">.</span>context<span class="token punctuation">.</span></span><span class="token class-name">ContextConfiguration</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>test<span class="token punctuation">.</span>context<span class="token punctuation">.</span>junit4<span class="token punctuation">.</span></span><span class="token class-name">SpringJUnit4ClassRunner</span></span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>title: com.qf<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
 * <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Company: wendao<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
 * author zhuximing
 * date 2021/6/25
 * description:
 */</span>
<span class="token annotation punctuation">@RunWith</span><span class="token punctuation">(</span><span class="token class-name">SpringJUnit4ClassRunner</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ContextConfiguration</span><span class="token punctuation">(</span>locations <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;classpath:app-sentinel.xml&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestSentinel</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">StringRedisTemplate</span> redisTemplate<span class="token punctuation">;</span>
    
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span>  <span class="token function">testSentinel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

        redisTemplate<span class="token punctuation">.</span><span class="token function">boundValueOps</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;rose&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">String</span> name <span class="token operator">=</span> redisTemplate<span class="token punctuation">.</span><span class="token function">boundValueOps</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>


    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="_13-redis分布式集群" tabindex="-1"><a class="header-anchor" href="#_13-redis分布式集群" aria-hidden="true">#</a> 13：Redis分布式集群</h1><h2 id="分布式集群架构" tabindex="-1"><a class="header-anchor" href="#分布式集群架构" aria-hidden="true">#</a> 分布式集群架构</h2><blockquote><p>sentinel弊端：内存的瓶颈</p></blockquote><h2 id="分布式集群搭建" tabindex="-1"><a class="header-anchor" href="#分布式集群搭建" aria-hidden="true">#</a> 分布式集群搭建</h2><blockquote><p>说明:</p><p>1：伪集群，一台服务器，启动6个redis服务、通过端口区分（7001~7006）</p><p>2：真集群：6个节点或者3个节点</p></blockquote><p>第一步：从源码包复制redis.conf到指定目录</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@zhuxm01 server<span class="token punctuation">]</span><span class="token comment"># cp redis-6.0.8/redis.conf /export/server/redis/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>第二步：分别配置每个redis的配置文件，详细配置如下，注意区分端口</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>include /export/server/redis/cluster-conf/redis.conf
port <span class="token number">7001</span>
<span class="token comment">#redis的进程文件</span>
pidfile /var/run/redis7001.pid
<span class="token comment">#rdb文件名</span>
dbfilename redis7001.rdb
<span class="token comment">#aof文件名</span>
appendfilename <span class="token string">&quot;appendonly7001.aof&quot;</span>
<span class="token comment"># 集群</span>
cluster-enabled <span class="token function">yes</span>
<span class="token comment"># 生成的node文件</span>
cluster-config-file nodes7001.conf
<span class="token comment">#守护进程</span>
daemonize <span class="token function">yes</span>
<span class="token comment">#aof、rdb文件存储目录</span>
<span class="token function">dir</span> /export/server/redis/data/
<span class="token builtin class-name">bind</span> <span class="token number">0.0</span>.0.0

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-she ext-she line-numbers-mode"><pre class="language-she"><code>#如果redis设置密码，加上如下配置
requirepass &quot;123456&quot;
masterauth &quot;123456&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="/blog3/assets/image-20201009095058410.12f9685b.png" alt="image-20201009095058410"></p><p>第三步：启动每个redis服务</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@zhuxm01 redis<span class="token punctuation">]</span><span class="token comment"># redis-server /export/server/redis/redis7001.conf </span>
<span class="token punctuation">[</span>root@zhuxm01 redis<span class="token punctuation">]</span><span class="token comment"># redis-server /export/server/redis/redis7002.conf </span>
<span class="token punctuation">[</span>root@zhuxm01 redis<span class="token punctuation">]</span><span class="token comment"># redis-server /export/server/redis/redis7003.conf </span>
<span class="token punctuation">[</span>root@zhuxm01 redis<span class="token punctuation">]</span><span class="token comment"># redis-server /export/server/redis/redis7004.conf </span>
<span class="token punctuation">[</span>root@zhuxm01 redis<span class="token punctuation">]</span><span class="token comment"># redis-server /export/server/redis/redis7005.conf </span>
<span class="token punctuation">[</span>root@zhuxm01 redis<span class="token punctuation">]</span><span class="token comment"># redis-server /export/server/redis/redis7006.conf </span>
<span class="token punctuation">[</span>root@zhuxm01 redis<span class="token punctuation">]</span><span class="token comment"># ps -ef|grep redis</span>
root      <span class="token number">11186</span>      <span class="token number">1</span>  <span class="token number">0</span> 09:51 ?        00:00:00 redis-server <span class="token number">192.168</span>.234.131:7001 <span class="token punctuation">[</span>cluster<span class="token punctuation">]</span>
root      <span class="token number">11195</span>      <span class="token number">1</span>  <span class="token number">0</span> 09:51 ?        00:00:00 redis-server <span class="token number">192.168</span>.234.131:7002 <span class="token punctuation">[</span>cluster<span class="token punctuation">]</span>
root      <span class="token number">11203</span>      <span class="token number">1</span>  <span class="token number">0</span> 09:51 ?        00:00:00 redis-server <span class="token number">192.168</span>.234.131:7003 <span class="token punctuation">[</span>cluster<span class="token punctuation">]</span>
root      <span class="token number">11212</span>      <span class="token number">1</span>  <span class="token number">0</span> 09:51 ?        00:00:00 redis-server <span class="token number">192.168</span>.234.131:7004 <span class="token punctuation">[</span>cluster<span class="token punctuation">]</span>
root      <span class="token number">11220</span>      <span class="token number">1</span>  <span class="token number">0</span> 09:51 ?        00:00:00 redis-server <span class="token number">192.168</span>.234.131:7005 <span class="token punctuation">[</span>cluster<span class="token punctuation">]</span>
root      <span class="token number">11229</span>      <span class="token number">1</span>  <span class="token number">0</span> 09:51 ?        00:00:00 redis-server <span class="token number">192.168</span>.234.131:7006 <span class="token punctuation">[</span>cluster<span class="token punctuation">]</span>
root      <span class="token number">11240</span>   <span class="token number">7691</span>  <span class="token number">0</span> 09:52 pts/0    00:00:00 <span class="token function">grep</span> <span class="token parameter variable">--color</span><span class="token operator">=</span>auto redis
<span class="token punctuation">[</span>root@zhuxm01 redis<span class="token punctuation">]</span><span class="token comment"># </span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>第四步：创建集群</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>./redis-cli <span class="token parameter variable">--cluster</span> create <span class="token number">192.168</span>.247.30:7001 <span class="token punctuation">\</span>
<span class="token number">192.168</span>.247.30:7002 <span class="token punctuation">\</span>
<span class="token number">192.168</span>.247.30:7003 <span class="token punctuation">\</span>
<span class="token number">192.168</span>.247.30:7004 <span class="token punctuation">\</span>
<span class="token number">192.168</span>.247.30:7005 <span class="token punctuation">\</span>
<span class="token number">192.168</span>.247.30:7006 <span class="token punctuation">\</span>
--cluster-replicas <span class="token number">1</span> 


<span class="token punctuation">[</span>ERR<span class="token punctuation">]</span> Node <span class="token number">192.168</span>.247.30:7002 is not empty. Either the <span class="token function">node</span> already knows other nodes <span class="token punctuation">(</span>check with CLUSTER NODES<span class="token punctuation">)</span> or contains some key <span class="token keyword">in</span> database <span class="token number">0</span>.

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> Performing <span class="token builtin class-name">hash</span> slots allocation on <span class="token number">6</span> nodes<span class="token punctuation">..</span>.
Master<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> -<span class="token operator">&gt;</span> Slots <span class="token number">0</span> - <span class="token number">5460</span>
Master<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> -<span class="token operator">&gt;</span> Slots <span class="token number">5461</span> - <span class="token number">10922</span>
Master<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> -<span class="token operator">&gt;</span> Slots <span class="token number">10923</span> - <span class="token number">16383</span>
Adding replica <span class="token number">192.168</span>.234.131:7005 to <span class="token number">192.168</span>.234.131:7001
Adding replica <span class="token number">192.168</span>.234.131:7006 to <span class="token number">192.168</span>.234.131:7002
Adding replica <span class="token number">192.168</span>.234.131:7004 to <span class="token number">192.168</span>.234.131:7003
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> Trying to optimize slaves allocation <span class="token keyword">for</span> anti-affinity
<span class="token punctuation">[</span>WARNING<span class="token punctuation">]</span> Some slaves are <span class="token keyword">in</span> the same <span class="token function">host</span> as their master
M: 7e88abdfa256140ab11dc3c2173b00c5868a0479 <span class="token number">192.168</span>.234.131:7001
   slots:<span class="token punctuation">[</span><span class="token number">0</span>-5460<span class="token punctuation">]</span> <span class="token punctuation">(</span><span class="token number">5461</span> slots<span class="token punctuation">)</span> master
M: e5845e3494d58b5400fa21d4b3c34ccafce43024 <span class="token number">192.168</span>.234.131:7002
   slots:<span class="token punctuation">[</span><span class="token number">5461</span>-10922<span class="token punctuation">]</span> <span class="token punctuation">(</span><span class="token number">5462</span> slots<span class="token punctuation">)</span> master
M: 5dbec321866665aceb8ae0c6791e2ded39464368 <span class="token number">192.168</span>.234.131:7003
   slots:<span class="token punctuation">[</span><span class="token number">10923</span>-16383<span class="token punctuation">]</span> <span class="token punctuation">(</span><span class="token number">5461</span> slots<span class="token punctuation">)</span> master
S: 8ad824d12b9f1a16a75e227266e9940aa8610422 <span class="token number">192.168</span>.234.131:7004
   replicates 5dbec321866665aceb8ae0c6791e2ded39464368
S: 8ca84b32509e178181585206eaa736c6323dbd3a <span class="token number">192.168</span>.234.131:7005
   replicates 7e88abdfa256140ab11dc3c2173b00c5868a0479
S: 7a518a28534593c44694215e3a83b3311704e4d4 <span class="token number">192.168</span>.234.131:7006
   replicates e5845e3494d58b5400fa21d4b3c34ccafce43024
Can I <span class="token builtin class-name">set</span> the above configuration? <span class="token punctuation">(</span>type <span class="token string">&#39;yes&#39;</span> to accept<span class="token punctuation">)</span>: <span class="token function">yes</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> Nodes configuration updated
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> Assign a different config epoch to each <span class="token function">node</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> Sending CLUSTER MEET messages to <span class="token function">join</span> the cluster
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>第五步：连接集群</p><div class="language-she ext-she line-numbers-mode"><pre class="language-she"><code>redis-cli -h 192.168.234.122 -p 7002 -c
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="分布式集群-java客户端连接" tabindex="-1"><a class="header-anchor" href="#分布式集群-java客户端连接" aria-hidden="true">#</a> 分布式集群(java客户端连接)</h2><h4 id="基于springboot-1" tabindex="-1"><a class="header-anchor" href="#基于springboot-1" aria-hidden="true">#</a> 基于springboot</h4><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code>spring:
  redis:
    cluster:
      nodes:
        - 192.168.234.110:7001
        - 192.168.234.110:7002
        - 192.168.234.110:7003
        - 192.168.234.110:7004
        - 192.168.234.110:7005
        - 192.168.234.110:7006
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="基于xml配置-1" tabindex="-1"><a class="header-anchor" href="#基于xml配置-1" aria-hidden="true">#</a> 基于xml配置</h4><p>pom.xml</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>redis.clients<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jedis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.9.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.data<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-data-redis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.0.12.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>applicationContext-redis.xml</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>p</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/p<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>context</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/context<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>jee</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/jee<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>tx</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/tx<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>aop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/aop<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>
            http://www.springframework.org/schema/beans
            http://www.springframework.org/schema/beans/spring-beans-4.2.xsd
            http://www.springframework.org/schema/context
            http://www.springframework.org/schema/context/spring-context-4.2.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!-- 配置Cluster --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>redisClusterConfiguration<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.data.redis.connection.RedisClusterConfiguration<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 节点配置 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>clusterNodes<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>set</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.data.redis.connection.RedisNode<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>host<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>192.168.25.101<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>constructor-arg</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>port<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>7001<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>constructor-arg</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.data.redis.connection.RedisNode<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>host<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>192.168.25.101<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>constructor-arg</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>port<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>7002<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>constructor-arg</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.data.redis.connection.RedisNode<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>host<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>192.168.25.101<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>constructor-arg</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>port<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>7003<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>constructor-arg</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.data.redis.connection.RedisNode<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>host<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>192.168.25.101<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>constructor-arg</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>port<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>7004<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>constructor-arg</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.data.redis.connection.RedisNode<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>host<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>192.168.25.101<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>constructor-arg</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>port<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>7005<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>constructor-arg</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.data.redis.connection.RedisNode<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>host<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>192.168.25.101<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>constructor-arg</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>port<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>7006<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>constructor-arg</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>set</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--redis 连接池的配置信息--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jedisPoolConfig<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>redis.clients.jedis.JedisPoolConfig<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>maxIdle<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>100<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>maxTotal<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>600<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jedisConnectionFactory<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.data.redis.connection.jedis.JedisConnectionFactory<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>redisClusterConfiguration<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jedisPoolConfig<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- redis 访问的模版 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>redisTemplate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.data.redis.core.StringRedisTemplate<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>connectionFactory<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jedisConnectionFactory<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>wfx<span class="token punctuation">.</span>test</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>wfx<span class="token punctuation">.</span>dao<span class="token punctuation">.</span></span><span class="token class-name">SysRoleDao</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>wfx<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">SysRole</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>wfx<span class="token punctuation">.</span>service<span class="token punctuation">.</span></span><span class="token class-name">IsysRoleService</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>wfx<span class="token punctuation">.</span>vo<span class="token punctuation">.</span></span><span class="token class-name">TreeNodeVO</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span></span><span class="token class-name">Test</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>runner<span class="token punctuation">.</span></span><span class="token class-name">RunWith</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>data<span class="token punctuation">.</span>redis<span class="token punctuation">.</span>core<span class="token punctuation">.</span></span><span class="token class-name">RedisTemplate</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>data<span class="token punctuation">.</span>redis<span class="token punctuation">.</span>core<span class="token punctuation">.</span></span><span class="token class-name">ZSetOperations</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>test<span class="token punctuation">.</span>context<span class="token punctuation">.</span></span><span class="token class-name">ContextConfiguration</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>test<span class="token punctuation">.</span>context<span class="token punctuation">.</span>junit4<span class="token punctuation">.</span></span><span class="token class-name">SpringJUnit4ClassRunner</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">redis<span class="token punctuation">.</span>clients<span class="token punctuation">.</span>jedis<span class="token punctuation">.</span></span><span class="token class-name">Jedis</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">redis<span class="token punctuation">.</span>clients<span class="token punctuation">.</span>jedis<span class="token punctuation">.</span></span><span class="token class-name">JedisPool</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">redis<span class="token punctuation">.</span>clients<span class="token punctuation">.</span>jedis<span class="token punctuation">.</span></span><span class="token class-name">JedisPoolConfig</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Iterator</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Set</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">TimeUnit</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@RunWith</span><span class="token punctuation">(</span><span class="token class-name">SpringJUnit4ClassRunner</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ContextConfiguration</span><span class="token punctuation">(</span><span class="token string">&quot;classpath*:applicationContext-*.xml&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestSysRoleServie</span> <span class="token punctuation">{</span>


    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">RedisTemplate</span> redisTemplate<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> testString <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        redisTemplate<span class="token punctuation">.</span><span class="token function">boundValueOps</span><span class="token punctuation">(</span><span class="token string">&quot;demo&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;1234&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        redisTemplate<span class="token punctuation">.</span><span class="token function">expire</span><span class="token punctuation">(</span><span class="token string">&quot;demo&quot;</span><span class="token punctuation">,</span><span class="token number">30</span> <span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">SECONDS</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>redisTemplate<span class="token punctuation">.</span><span class="token function">boundValueOps</span><span class="token punctuation">(</span><span class="token string">&quot;demo&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> testList <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        redisTemplate<span class="token punctuation">.</span><span class="token function">boundListOps</span><span class="token punctuation">(</span><span class="token string">&quot;names&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">leftPush</span><span class="token punctuation">(</span><span class="token string">&quot;张飞&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        redisTemplate<span class="token punctuation">.</span><span class="token function">boundListOps</span><span class="token punctuation">(</span><span class="token string">&quot;names&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">leftPush</span><span class="token punctuation">(</span><span class="token string">&quot;刘备&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        redisTemplate<span class="token punctuation">.</span><span class="token function">boundListOps</span><span class="token punctuation">(</span><span class="token string">&quot;names&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">leftPush</span><span class="token punctuation">(</span><span class="token string">&quot;关羽&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        redisTemplate<span class="token punctuation">.</span><span class="token function">boundListOps</span><span class="token punctuation">(</span><span class="token string">&quot;names&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">leftPush</span><span class="token punctuation">(</span><span class="token string">&quot;曹操&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>redisTemplate<span class="token punctuation">.</span><span class="token function">boundListOps</span><span class="token punctuation">(</span><span class="token string">&quot;names&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">rightPop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>redisTemplate<span class="token punctuation">.</span><span class="token function">boundListOps</span><span class="token punctuation">(</span><span class="token string">&quot;names&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">rightPop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>redisTemplate<span class="token punctuation">.</span><span class="token function">boundListOps</span><span class="token punctuation">(</span><span class="token string">&quot;names&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">rightPop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>redisTemplate<span class="token punctuation">.</span><span class="token function">boundListOps</span><span class="token punctuation">(</span><span class="token string">&quot;names&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">rightPop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> testSet <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        redisTemplate<span class="token punctuation">.</span><span class="token function">boundSetOps</span><span class="token punctuation">(</span><span class="token string">&quot;ips&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;123&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;123&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;345&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;678&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>redisTemplate<span class="token punctuation">.</span><span class="token function">boundSetOps</span><span class="token punctuation">(</span><span class="token string">&quot;ips&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">members</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>redisTemplate<span class="token punctuation">.</span><span class="token function">boundSetOps</span><span class="token punctuation">(</span><span class="token string">&quot;ips&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> testHash <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

        redisTemplate<span class="token punctuation">.</span><span class="token function">boundHashOps</span><span class="token punctuation">(</span><span class="token string">&quot;person&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;jack&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        redisTemplate<span class="token punctuation">.</span><span class="token function">boundHashOps</span><span class="token punctuation">(</span><span class="token string">&quot;person&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;12&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>redisTemplate<span class="token punctuation">.</span><span class="token function">boundHashOps</span><span class="token punctuation">(</span><span class="token string">&quot;person&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>redisTemplate<span class="token punctuation">.</span><span class="token function">boundHashOps</span><span class="token punctuation">(</span><span class="token string">&quot;person&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>





<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="_14-redis缓存三类问题" tabindex="-1"><a class="header-anchor" href="#_14-redis缓存三类问题" aria-hidden="true">#</a> 14：Redis缓存三类问题</h1><h2 id="_14-1-缓存击穿" tabindex="-1"><a class="header-anchor" href="#_14-1-缓存击穿" aria-hidden="true">#</a> 14.1：缓存击穿</h2><blockquote><p><code>某一个</code>热点key，在<code>失效的一瞬间</code>，持续的高并发访问<code>击破缓存</code>直接访问数据库，导致数据库造的周期性压力（极端情况下导致数据库宕机）</p></blockquote><p>缓存击穿演示</p><blockquote><p>jemeter :压力测试工具，可以演示高并发场景</p></blockquote><p>创建测试计划</p><p><img src="/blog3/assets/image-20210112092515437.04586dab.png" alt="image-20210112092515437"></p><p>创建线程组</p><p><img src="/blog3/assets/image-20210112092600864.db79c164.png" alt="image-20210112092600864"></p><p><img src="/blog3/assets/image-20210112092826621.c90cdd8f.png" alt="image-20210112092826621"></p><p>创建http请求</p><p><img src="/blog3/assets/image-20210112092908877.f83b5d3e.png" alt="image-20210112092908877"></p><p><img src="/blog3/assets/image-20210112093022444.64f031b9.png" alt="image-20210112093022444"></p><p>监听http请求的结果</p><p><img src="/blog3/assets/image-20210112093121326.845221e8.png" alt="image-20210112093121326"></p><p>开始压力测试</p><p><img src="/blog3/assets/image-20210112093216360.939f5947.png" alt="image-20210112093216360"></p><p>缓存击穿解决办法:</p><blockquote><p>加锁(分布式锁)，两次判断</p></blockquote><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>  <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TbCategory</span><span class="token punctuation">&gt;</span></span> <span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token doc-comment comment">/**
         * string
         * k=&gt; index:category
         * v=&gt; json串（分类列表）
         */</span>
        <span class="token comment">//get from redis</span>
        <span class="token class-name">BoundValueOperations</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> operations <span class="token operator">=</span> redisTemplate<span class="token punctuation">.</span><span class="token function">boundValueOps</span><span class="token punctuation">(</span><span class="token string">&quot;index:category&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> catListJsonStr <span class="token operator">=</span> operations<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>catListJsonStr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TbCategory</span><span class="token punctuation">&gt;</span></span> categories<span class="token punctuation">;</span>
            <span class="token keyword">synchronized</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

                <span class="token class-name">String</span> catListJsonStrAgain <span class="token operator">=</span> operations<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>catListJsonStrAgain<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;get from db&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token comment">//get from db</span>
                    categories <span class="token operator">=</span> categoryMapper<span class="token punctuation">.</span><span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token class-name">String</span> jsonStr <span class="token operator">=</span> <span class="token class-name">JSONUtil</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>categories<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toStringPretty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                    <span class="token comment">//cache to redis</span>
                    operations<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>jsonStr<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">return</span> categories<span class="token punctuation">;</span>

                <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>

                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;get from redis&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                    <span class="token class-name">List</span> list <span class="token operator">=</span> <span class="token class-name">JSONUtil</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span>catListJsonStrAgain<span class="token punctuation">,</span> <span class="token class-name">TbCategory</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">return</span> list<span class="token punctuation">;</span>
                <span class="token punctuation">}</span>



            <span class="token punctuation">}</span>


        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>

            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;get from redis&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//json串=&gt;对象</span>
            <span class="token class-name">List</span> list <span class="token operator">=</span> <span class="token class-name">JSONUtil</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span>catListJsonStr<span class="token punctuation">,</span> <span class="token class-name">TbCategory</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> list<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>


    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_14-2-缓存穿透" tabindex="-1"><a class="header-anchor" href="#_14-2-缓存穿透" aria-hidden="true">#</a> 14.2：缓存穿透</h2><blockquote><p>请求的某个热点数据、数据库并不存在，缓存也无法命中，请求都会到数据源，从而可能压垮数据源</p><p>数据库中没有，同时Redis中也没有</p></blockquote><h4 id="方案1-缓存空值" tabindex="-1"><a class="header-anchor" href="#方案1-缓存空值" aria-hidden="true">#</a> 方案1：缓存空值</h4><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code> <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TbBrand</span><span class="token punctuation">&gt;</span></span> <span class="token function">selectBrandsByCatId</span><span class="token punctuation">(</span><span class="token class-name">String</span> catId<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token doc-comment comment">/**
         * string
         * k=&gt;index:brand:$<span class="token punctuation">{</span>catId<span class="token punctuation">}</span>
         * v=&gt;品牌列表的json串
         *
         * hash[推荐]
         * k=&gt; index:brand
         * v=&gt;
         *       field=&gt;$<span class="token punctuation">{</span>catId<span class="token punctuation">}</span>
         *       value=&gt;品牌列表的json串
         */</span>

        <span class="token comment">//get from redis</span>
        <span class="token class-name">BoundHashOperations</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> operations <span class="token operator">=</span> redisTemplate<span class="token punctuation">.</span><span class="token function">boundHashOps</span><span class="token punctuation">(</span><span class="token string">&quot;index:brand&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Object</span> brandListJsonStr <span class="token operator">=</span> operations<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>catId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>brandListJsonStr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;get from db&quot;</span><span class="token operator">+</span>catId<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">//get from db</span>
            <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TbBrand</span><span class="token punctuation">&gt;</span></span> brandsByCatId <span class="token operator">=</span> brandMapper<span class="token punctuation">.</span><span class="token function">findBrandsByCatId</span><span class="token punctuation">(</span>catId<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">//if (brandsByCatId != null  &amp;&amp; brandsByCatId.size()&gt;0) {</span>
                <span class="token comment">//cache to redis</span>
                <span class="token class-name">String</span> jsonStr <span class="token operator">=</span> <span class="token class-name">JSONUtil</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>brandsByCatId<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toStringPretty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                operations<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>catId<span class="token punctuation">,</span>jsonStr<span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token comment">// }</span>
            <span class="token keyword">return</span> brandsByCatId<span class="token punctuation">;</span>

        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>

            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;get from redis&quot;</span><span class="token operator">+</span>catId<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TbBrand</span><span class="token punctuation">&gt;</span></span> tbBrands <span class="token operator">=</span> <span class="token class-name">JSONUtil</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> brandListJsonStr<span class="token punctuation">,</span> <span class="token class-name">TbBrand</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


            <span class="token keyword">return</span>  tbBrands<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>


    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="方案2-布隆过滤" tabindex="-1"><a class="header-anchor" href="#方案2-布隆过滤" aria-hidden="true">#</a> 方案2：布隆过滤</h4><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code> <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">RedissonClient</span> <span class="token function">redissonClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

        <span class="token comment">//构造redisson客户端，并放入IOC容器中</span>
        <span class="token class-name">Config</span> config <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Config</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        config<span class="token punctuation">.</span><span class="token function">useSingleServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setAddress</span><span class="token punctuation">(</span><span class="token string">&quot;redis://127.0.0.1:6379&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">RedissonClient</span> redissonClient <span class="token operator">=</span> <span class="token class-name">Redisson</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">RBloomFilter</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> bloomFilter <span class="token operator">=</span> redissonClient<span class="token punctuation">.</span><span class="token function">getBloomFilter</span><span class="token punctuation">(</span><span class="token string">&quot;spuIds&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//初始化</span>
        bloomFilter<span class="token punctuation">.</span><span class="token function">tryInit</span><span class="token punctuation">(</span><span class="token number">100000000L</span><span class="token punctuation">,</span><span class="token number">0.03</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//初始化数据</span>
        bloomFilter<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        bloomFilter<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        bloomFilter<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        bloomFilter<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;4&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        bloomFilter<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;5&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> redissonClient<span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_14-3-缓存雪崩" tabindex="-1"><a class="header-anchor" href="#_14-3-缓存雪崩" aria-hidden="true">#</a> 14.3：缓存雪崩</h2><blockquote><p>当redis服务器重启或者大量缓存集中在某一个时间段失效,即使不是高并发，访问量大，导致数据库访问压力大</p></blockquote><p>解决方案</p><blockquote><p>让过期时间平均分布 过期时间=预设置的过期时间+随机数</p></blockquote><h1 id="_15-面试题" tabindex="-1"><a class="header-anchor" href="#_15-面试题" aria-hidden="true">#</a> 15：面试题</h1><h2 id="_15-1-redis内存满了怎么办" tabindex="-1"><a class="header-anchor" href="#_15-1-redis内存满了怎么办" aria-hidden="true">#</a> 15.1：Redis内存满了怎么办？</h2><h3 id="_1、通过配置文件配置" tabindex="-1"><a class="header-anchor" href="#_1、通过配置文件配置" aria-hidden="true">#</a> 1、通过配置文件配置</h3><p>通过在Redis安装目录下面的<strong>redis.conf</strong>配置文件中添加以下配置设置内存大小</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>//设置Redis最大占用内存大小为100M
maxmemory 100mb
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2、通过命令修改" tabindex="-1"><a class="header-anchor" href="#_2、通过命令修改" aria-hidden="true">#</a> 2、通过命令修改</h3><p>Redis支持运行时通过命令动态修改内存大小</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>//设置Redis最大占用内存大小为100M
127.0.0.1:6379&gt; config set maxmemory 100mb
//获取设置的Redis能使用的最大内存大小
127.0.0.1:6379&gt; config get maxmemory
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>如果不设置最大内存大小或者设置最大内存大小为0，在64位操作系统下不限制内存大小，在32位操作系统下最多使用3GB内存</p></blockquote><h3 id="redis的内存淘汰" tabindex="-1"><a class="header-anchor" href="#redis的内存淘汰" aria-hidden="true">#</a> Redis的内存淘汰</h3><blockquote><p>既然可以设置Redis最大占用内存大小，那么配置的内存就有用完的时候。那在内存用完的时候，还继续往Redis里面添加数据不就没内存可用了吗？</p></blockquote><p>实际上Redis定义了几种策略用来处理这种情况：</p><ul><li><strong>noeviction(默认策略)</strong>：对于写请求不再提供服务，直接返回错误（DEL请求和部分特殊请求除外）</li><li><strong>allkeys-lru</strong>：从所有key中使用LRU算法进行淘汰,<strong>LRU(Least Recently Used)</strong></li><li><strong>volatile-lru</strong>：从设置了过期时间的key中使用LRU算法进行淘汰,<strong>LRU(Least Recently Used)</strong></li><li><strong>allkeys-random</strong>：从所有key中随机淘汰数据</li><li><strong>volatile-random</strong>：从设置了过期时间的key中随机淘汰</li><li><strong>volatile-ttl</strong>：在设置了过期时间的key中，根据key的过期时间进行淘汰，越早过期的越优先被淘汰</li></ul><blockquote><p>当使用<strong>volatile-lru</strong>、<strong>volatile-random</strong>、<strong>volatile-ttl</strong>这三种策略时，如果没有key可以被淘汰，则和<strong>noeviction</strong>一样返回错误</p></blockquote><h3 id="如何获取及设置内存淘汰策略" tabindex="-1"><a class="header-anchor" href="#如何获取及设置内存淘汰策略" aria-hidden="true">#</a> 如何获取及设置内存淘汰策略</h3><p>获取当前内存淘汰策略：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>127.0.0.1:6379&gt; config get maxmemory-policy
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>通过配置文件设置淘汰策略（修改<strong>redis.conf</strong>文件）：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>maxmemory-policy allkeys-lru
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>通过命令修改淘汰策略：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>127.0.0.1:6379&gt; config set maxmemory-policy allkeys-lru
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="_15-2-为什么删除数据后-redis内存占用依然很高" tabindex="-1"><a class="header-anchor" href="#_15-2-为什么删除数据后-redis内存占用依然很高" aria-hidden="true">#</a> 15.2：为什么删除数据后，Redis内存占用依然很高？</h2><h3 id="_1-什么是内存碎片" tabindex="-1"><a class="header-anchor" href="#_1-什么是内存碎片" aria-hidden="true">#</a> 1.什么是内存碎片？</h3><p>内存碎片这个概念应该不是第一听说了，熟悉JVM或者操作系统的应该都熟悉，以火车卖票为例，一个车厢<code>128</code>个车位，由于高峰期，只剩余<code>两个</code>位置了，但是此时<code>三个</code>人想要坐在一起，能够吹吹牛批，喝喝酒的，那么这三个人肯定不会买这节车厢的两个位置了，此时这两个位置可以称之为座位碎片 。</p><h3 id="_2-为什么会出现内存碎片" tabindex="-1"><a class="header-anchor" href="#_2-为什么会出现内存碎片" aria-hidden="true">#</a> 2.为什么会出现内存碎片</h3><p><code>Redis</code>提供了多种的内存分配策略，比如<code>libc</code>、<code>jemalloc</code>、<code>tcmalloc</code>，默认使用<code>jemalloc</code>。</p><p><code>jemalloc</code>这种分配策略并不是按需分配，而是固定大小分配，比如8字节、32字节....2KB、4KB等</p><p><img src="/blog3/assets/image-20210111221708703.dbce5198.png" alt="image-20210111221708703"></p><h3 id="_3-如何判断存在内存碎片" tabindex="-1"><a class="header-anchor" href="#_3-如何判断存在内存碎片" aria-hidden="true">#</a> 3.如何判断存在内存碎片？</h3><blockquote><p>这个对于运维人员来说很重要，一旦出现Redis运行缓慢或者阻塞了，一定需要先判断内存的占用情况，而不是重启Redis。</p></blockquote><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>INFO memory
<span class="token comment"># Memory</span>
used_memory:1073741736  <span class="token comment">#实际使用的内存大小</span>
used_memory_human:1024.00M <span class="token comment">#人类有好的方式</span>
used_memory_rss:1997159792  <span class="token comment">#操作系统实际内存分配</span>
used_memory_rss_human:1.86G
…
mem_fragmentation_ratio:1.86 <span class="token comment">##碎片率</span>
mem_fragmentation_ratio这个指标很清楚的展示了当前内存的碎片率，比如Redis申请了1000字节，但是操作系统实际分配的内存1800个字节，则mem_fragmentation_ratio<span class="token operator">=</span><span class="token number">1800</span>/1000<span class="token operator">=</span><span class="token number">1.8</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-如何清理内存碎片" tabindex="-1"><a class="header-anchor" href="#_4-如何清理内存碎片" aria-hidden="true">#</a> 4.如何清理内存碎片？</h3><p>Redis提供了参数配置，可以控制清除内存碎片的时机，命令如下：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>config set activedefrag yes
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>以上命令启动自动清理，但是具体什么时候清理，还要受以下两个参数的影响：</p><ol><li><code>active-defrag-ignore-bytes 400mb</code>：如果内存碎片达到了<code>400mb</code>，开始清理（自定义）</li><li><code>active-defrag-threshold-lower 20</code>：内存碎片空间占操作系统分配给 Redis 的总空间比例达到<code>20%</code>时，开始清理（自定义）</li></ol><p><img src="/blog3/assets/image-20210111222416717.b7681b06.png" alt="image-20210111222416717"></p><h2 id="_15-3-redis6的新特性" tabindex="-1"><a class="header-anchor" href="#_15-3-redis6的新特性" aria-hidden="true">#</a> 15.3：Redis6的新特性</h2><h4 id="redis-6-0-新特性-多线程" tabindex="-1"><a class="header-anchor" href="#redis-6-0-新特性-多线程" aria-hidden="true">#</a> Redis 6.0 新特性-多线程</h4><p>1：严格来讲从Redis4.0之后并不是单线程，除了主线程外，它也有后台线程在处理一些较为缓慢的操作，例如清理脏数据、无用连接的释放、大 key 的删除等等</p><p>2：Redis多线程主要解决网络IO瓶颈，并不是解决CPU瓶颈</p><p><img src="/blog3/assets/image-20210831173947595.27dfd555.png" alt="image-20210831173947595"></p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code>从上面的实现机制可以看出，Redis的多线程部分只是用来处理网络数据的读写和协议解析，执行命令仍然是单线程顺序执行。所以我们不需要去考虑控制并发及线程安全问题。
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>3.Redis6.0默认是否开启了多线程？</p><p>Redis6.0的多线程默认是禁用的，只使用主线程。如需开启需要修改redis.conf配置文件：</p><p>io-threads-do-reads yes <img src="https://img-blog.csdnimg.cn/20200505205508583.png" alt="在这里插入图片描述"></p><p>4.Redis6.0多线程开启时，线程数如何设置？</p><p>开启多线程后，还需要设置线程数，否则是不生效的。同样修改redis.conf配置文件 <img src="https://img-blog.csdnimg.cn/20200505205541814.png" alt="在这里插入图片描述"> 关于线程数的设置，官方有一个建议：4核的机器建议设置为2或3个线程，8核的建议设置为6个线程，线程数一定要小于机器核数。还需要注意的是，线程数并不是越大越好，官方认为超过了8个基本就没什么意义了。</p><h4 id="redis6新特性-acl" tabindex="-1"><a class="header-anchor" href="#redis6新特性-acl" aria-hidden="true">#</a> redis6新特性-acl</h4><p>Redis6之前Redis就只有一个用户(default)权限最高，通过配置文件的requirepass配置</p><p>Redis6版本推出了<strong>ACL(Access Control List)访问控制权限</strong>的功能，基于此功能，我们可以设置多个用户，为了保证<strong>向下兼容</strong>，Redis6保留了default用户和使用requirepass的方式给default用户设置密码，默认情况下default用户拥有Redis最大权限，我们使用redis-cli连接时如果没有指定用户名，用户也是默认default</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>ACL常用命令
ACL <span class="token function">whoami</span>
ACL list
ACL setuser allen on <span class="token operator">&gt;</span><span class="token number">123456</span> +@all ~*
AUTH allen mypasswd

<span class="token comment">#只能创建以lakers为前缀的key</span>
ACL setuser james on <span class="token operator">&gt;</span><span class="token number">123456</span> +@all ~lakers*
<span class="token comment">#不拥有set权限</span>
ACL setuser james <span class="token parameter variable">-SET</span>

ACL DELUSER james
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!--[--><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: huang.lian@trs.com.cn">黄炼</span><!----><!--]--><!--]--></span></div></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/blog3/assets/app.3adea723.js" defer></script>
  </body>
</html>
